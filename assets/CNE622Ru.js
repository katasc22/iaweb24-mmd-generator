var Q=Object.defineProperty;var U=(i,t,e)=>t in i?Q(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var _=(i,t,e)=>U(i,typeof t!="symbol"?t+"":t,e);function j(i,t,e){const o=e*.6,n=Math.floor(t/o),c=[];let h="";return i.split(" ").forEach(u=>{const y=h?h+" "+u:u;y.length>n?(c.push(h),h=u):h=y}),h&&c.push(h),c}class Z{constructor(){_(this,"elements",[]);_(this,"_width");_(this,"_height")}width(t){return this._width=t,this}height(t){return this._height=t,this}group(t,e){const o=D(t);return this.elements.push(`<g ${o}>`),e(this),this.elements.push("</g>"),this}rect(t){return this.elements.push(C("rect",t)),this}text(t,e){const o=C("text",t,e);return this.elements.push(o),this}textBlock(t,e,o){return this.text(t,e.map((n,c)=>{const h=c===0?0:o;return C("tspan",{x:t.x,dy:h},n)}).join(""))}build(t=!1){const e=this.elements.join(`
`),o={xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${this._width} ${this._height}`};return t&&(o.width=this._width,o.height=this._height),C("svg",o,e)}}function tt(){return new Z}function C(i,t,e=""){const o=D(t);return`<${i} ${o}>${e}</${i}>`}function D(i){return Object.entries(i).filter(([,t])=>t!==void 0).map(([t,e])=>`${t}="${e}"`).join(" ")}function it(i,t={},{forceSize:e}={forceSize:!1}){const{blockMargin:o=20,blockPadding:n=20,blockGap:c=10,blockBackgroundColor:h="#f5f5f5",blockStrokeColor:u="#c8c8c8",blockFontFamily:y=void 0,blockFontSize:d=18,blockTextColor:L="#000",towerWidth:a=200,towerPadding:s=10,towerGap:z=20,towerBackgroundColor:O="#e6e6e6",towerStrokeColor:P="#c8c8c8",towerFontFamily:X=void 0,towerFontSize:f=16,towerTextColor:I="#000",boxPadding:v=10,boxGap:E=10,boxBackgroundColor:R="#ffffff",boxStrokeColor:V="#c8c8c8",boxFontFamily:Y=void 0,boxFontSize:m=14,boxTextColor:q="#000"}=t,F=[];Object.entries(i).forEach(([l,w])=>{let x=0;const r=Object.entries(w).map(([b,G])=>{const M=G.map(p=>{const B=j(p,a-2*s,m),N=B.length*m+v*2;return{title:B,height:N}}),W=j(b,a,f),J=W.length*f,K=M.map(p=>p.height).reduce((p,B)=>p+B+E,0),T=J+K+s*3;return T>x&&(x=T),{title:W,height:T,boxes:M}}),$=r.length*a+(r.length-1)*z+n*2,g=j(l,$,d),k=x+g.length*d+n*2;F.push({title:g,width:$,height:k,towers:r})});const S=Math.max(...F.map(l=>l.height))+n*2,A=tt();let H=n;return F.forEach(l=>{A.group({transform:`translate(${H}, ${n})`},w=>{w.rect({x:0,y:0,width:l.width,height:S,fill:h,stroke:u,strokeWidth:2,rx:10}),w.textBlock({x:n,y:d+n,"font-family":y,"font-size":d,fill:L},l.title,d);let x=n;l.towers.forEach(r=>{const $=S-n-r.height;w.group({transform:`translate(${x}, ${$})`},g=>{g.rect({x:0,y:0,width:a,height:r.height,fill:O,stroke:P,"stroke-width":2,rx:10}),g.textBlock({x:s,y:f+s,"font-family":X,"font-size":f,fill:I},r.title,f);let k=r.title.length*f+s*2;r.boxes.forEach(b=>{g.rect({x:s,y:k,width:a-s*2,height:b.height,fill:R,stroke:V,"stroke-width":1,rx:10}),g.textBlock({x:s+v,y:k+m+v,"font-family":Y,"font-size":m,fill:q},b.title,m),k+=b.height+E})}),x+=a+z})}),H+=l.width+n*2+c}),A.width(H).height(S+o*2).build(e)}export{it as g};
