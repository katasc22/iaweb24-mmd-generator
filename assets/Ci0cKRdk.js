var At=Object.defineProperty;var Ot=(e,t,o)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var Ce=(e,t,o)=>Ot(e,typeof t!="symbol"?t+"":t,o);import{n as Dt,p as b,o as de,c as ce,a as c,t as k,q as O,v as U,s as _e,u as Pe,x as _t,y as Pt,z as V,f as q,r as h,A as Nt,B as D,F as it,C as K,D as X,E as B,G as J,h as se,H as Mt,T as zt,I as Rt,m as Bt,J as jt,K as Ht,b as ue,w as pe,L as P,M as et}from"./CN0Rz_B-.js";import{read as Ut,utils as Fe,writeFile as Vt}from"./C2piJvdv.js";const st=Dt("dataStore",{state:()=>({fileName:"",gridData:[],diagramData:void 0,svg:"",blockCount:0,towerCount:0,settings:{block:{margin:20,padding:20,gap:10,backgroundColor:"#f5f5f5",strokeColor:"#c8c8c8",fontFamily:"Arial",fontSize:18,textColor:"#000000"},tower:{width:200,padding:10,gap:20,backgroundColor:"#e6e6e6",strokeColor:"#c8c8c8",fontFamily:"Arial",fontSize:16,textColor:"#000000"},box:{padding:10,gap:10,backgroundColor:"#ffffff",strokeColor:"#c8c8c8",fontFamily:"Arial",fontSize:14,textColor:"#000000"}}}),actions:{updateFileName(e){this.fileName=e},updateGridData(e){this.gridData=e},updateDiagramData(e,t,o,n){this.diagramData=e,this.svg=t,this.blockCount=o,this.towerCount=n},updateSettings(e){e.block&&(this.settings.block.backgroundColor=e.block.backgroundColor??this.settings.block.backgroundColor,this.settings.block.strokeColor=e.block.strokeColor??this.settings.block.strokeColor,this.settings.block.fontFamily=e.block.fontFamily??this.settings.block.fontFamily,this.settings.block.fontSize=e.block.fontSize??this.settings.block.fontSize,this.settings.block.textColor=e.block.textColor??this.settings.block.textColor),e.tower&&(this.settings.tower.backgroundColor=e.tower.backgroundColor??this.settings.tower.backgroundColor,this.settings.tower.strokeColor=e.tower.strokeColor??this.settings.tower.strokeColor,this.settings.tower.fontFamily=e.tower.fontFamily??this.settings.tower.fontFamily,this.settings.tower.fontSize=e.tower.fontSize??this.settings.tower.fontSize,this.settings.tower.textColor=e.tower.textColor??this.settings.tower.textColor),e.box&&(this.settings.box.backgroundColor=e.box.backgroundColor??this.settings.box.backgroundColor,this.settings.box.strokeColor=e.box.strokeColor??this.settings.box.strokeColor,this.settings.box.fontFamily=e.box.fontFamily??this.settings.box.fontFamily,this.settings.box.fontSize=e.box.fontSize??this.settings.box.fontSize,this.settings.box.textColor=e.box.textColor??this.settings.box.textColor)},resetData(){this.fileName="",this.gridData=[],this.diagramData=null,this.svg=null,this.blockCount=0,this.towerCount=0}}}),It={class:"grid-container"},Wt={class:"grid-item"},Gt={for:"blockBackgroundColor"},qt={class:"grid-item"},Xt={for:"blockStrokeColor"},Yt={class:"grid-item"},Kt={for:"blockTextColor"},Qt={class:"grid-item"},Jt={for:"blockFontFamily"},Zt={class:"grid-item"},eo={for:"blockFontSize"},to={class:"grid-container"},oo={class:"grid-item"},no={for:"towerBackgroundColor"},lo={class:"grid-item"},ro={for:"towerStrokeColor"},ao={class:"grid-item"},io={for:"towerTextColor"},so={class:"grid-item"},uo={for:"towerFontFamily"},co={class:"grid-item"},fo={for:"towerFontSize"},vo={class:"border-b-2 border-green"},mo={class:"grid-container"},po={class:"grid-item"},ho={for:"boxBackgroundColor"},go={class:"grid-item"},bo={for:"boxStrokeColor"},wo={class:"grid-item"},yo={for:"boxTextColor"},ko={class:"grid-item"},Co={for:"boxFontFamily"},xo={class:"grid-item"},Eo={for:"boxFontSize"},So={type:"submit",class:"btn-primary w-fit"},$o={__name:"MMForm",emits:["form-submit"],setup(e,{emit:t}){const o=t,n=st(),l=b(()=>n.settings),a=()=>{n.updateSettings(l.value),o("form-submit")};return(i,r)=>(de(),ce("form",{onSubmit:_t(a,["prevent"])},[c("h3",null,k(i.$t("form.blockSettings")),1),c("div",It,[c("div",Wt,[c("label",Gt,k(i.$t("form.backgroundColor")),1),O(c("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>l.value.block.backgroundColor=s),id:"blockBackgroundColor",type:"color"},null,512),[[U,l.value.block.backgroundColor]])]),c("div",qt,[c("label",Xt,k(i.$t("form.borderColor")),1),O(c("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>l.value.block.strokeColor=s),id:"blockStrokeColor",type:"color"},null,512),[[U,l.value.block.strokeColor]])]),c("div",Yt,[c("label",Kt,k(i.$t("form.textColor")),1),O(c("input",{"onUpdate:modelValue":r[2]||(r[2]=s=>l.value.block.textColor=s),id:"blockTextColor",type:"color"},null,512),[[U,l.value.block.textColor]])]),c("div",Qt,[c("label",Jt,k(i.$t("form.fontFamily")),1),O(c("select",{"onUpdate:modelValue":r[3]||(r[3]=s=>l.value.block.fontFamily=s),id:"towerFontFamily"},r[15]||(r[15]=[Pe('<option value="Arial">Arial</option><option value="&#39;Times New Roman&#39;, Times, serif">Times New Roman</option><option value="Verdana, Geneva, sans-serif">Verdana</option><option value="Tahoma, Geneva, sans-serif">Tahoma</option><option value="&#39;Courier New&#39;, Courier, monospace">Courier New</option><option value="&#39;Georgia&#39;, serif">Georgia</option>',6)]),512),[[_e,l.value.block.fontFamily]])]),c("div",Zt,[c("label",eo,k(i.$t("form.fontSize")),1),O(c("input",{"onUpdate:modelValue":r[4]||(r[4]=s=>l.value.block.fontSize=s),id:"blockFontSize",type:"number",placeholder:"18"},null,512),[[U,l.value.block.fontSize]])])]),c("h3",null,k(i.$t("form.towerSettings")),1),c("div",to,[c("div",oo,[c("label",no,k(i.$t("form.backgroundColor")),1),O(c("input",{"onUpdate:modelValue":r[5]||(r[5]=s=>l.value.tower.backgroundColor=s),id:"towerBackgroundColor",type:"color"},null,512),[[U,l.value.tower.backgroundColor]])]),c("div",lo,[c("label",ro,k(i.$t("form.borderColor")),1),O(c("input",{"onUpdate:modelValue":r[6]||(r[6]=s=>l.value.tower.strokeColor=s),id:"towerStrokeColor",type:"color"},null,512),[[U,l.value.tower.strokeColor]])]),c("div",ao,[c("label",io,k(i.$t("form.textColor")),1),O(c("input",{"onUpdate:modelValue":r[7]||(r[7]=s=>l.value.tower.textColor=s),id:"towerTextColor",type:"color"},null,512),[[U,l.value.tower.textColor]])]),c("div",so,[c("label",uo,k(i.$t("form.fontFamily")),1),O(c("select",{"onUpdate:modelValue":r[8]||(r[8]=s=>l.value.tower.fontFamily=s),id:"towerFontFamily"},r[16]||(r[16]=[Pe('<option value="Arial">Arial</option><option value="&#39;Times New Roman&#39;, Times, serif">Times New Roman</option><option value="Verdana, Geneva, sans-serif">Verdana</option><option value="Tahoma, Geneva, sans-serif">Tahoma</option><option value="&#39;Courier New&#39;, Courier, monospace">Courier New</option><option value="&#39;Georgia&#39;, serif">Georgia</option>',6)]),512),[[_e,l.value.tower.fontFamily]])]),c("div",co,[c("label",fo,k(i.$t("form.fontSize")),1),O(c("input",{"onUpdate:modelValue":r[9]||(r[9]=s=>l.value.tower.fontSize=s),id:"towerFontSize",type:"number",placeholder:"16"},null,512),[[U,l.value.tower.fontSize]])])]),c("h3",vo,k(i.$t("form.boxSettings")),1),c("div",mo,[c("div",po,[c("label",ho,k(i.$t("form.backgroundColor")),1),O(c("input",{"onUpdate:modelValue":r[10]||(r[10]=s=>l.value.box.backgroundColor=s),id:"boxBackgroundColor",type:"color"},null,512),[[U,l.value.box.backgroundColor]])]),c("div",go,[c("label",bo,k(i.$t("form.borderColor")),1),O(c("input",{"onUpdate:modelValue":r[11]||(r[11]=s=>l.value.box.strokeColor=s),id:"boxStrokeColor",type:"color"},null,512),[[U,l.value.box.strokeColor]])]),c("div",wo,[c("label",yo,k(i.$t("form.textColor")),1),O(c("input",{"onUpdate:modelValue":r[12]||(r[12]=s=>l.value.box.textColor=s),id:"boxTextColor",type:"color"},null,512),[[U,l.value.box.textColor]])]),c("div",ko,[c("label",Co,k(i.$t("form.fontFamily")),1),O(c("select",{"onUpdate:modelValue":r[13]||(r[13]=s=>l.value.box.fontFamily=s),id:"towerFontFamily"},r[17]||(r[17]=[Pe('<option value="Arial">Arial</option><option value="&#39;Times New Roman&#39;, Times, serif">Times New Roman</option><option value="Verdana, Geneva, sans-serif">Verdana</option><option value="Tahoma, Geneva, sans-serif">Tahoma</option><option value="&#39;Courier New&#39;, Courier, monospace">Courier New</option><option value="&#39;Georgia&#39;, serif">Georgia</option>',6)]),512),[[_e,l.value.box.fontFamily]])]),c("div",xo,[c("label",Eo,k(i.$t("form.fontSize")),1),O(c("input",{"onUpdate:modelValue":r[14]||(r[14]=s=>l.value.box.fontSize=s),id:"boxFontSize",type:"number",placeholder:"14"},null,512),[[U,l.value.box.fontSize]])])]),c("button",So,k(i.$t("form.save")),1)],32))}},Fo=.6;function Ne(e,t,o){const n=o*Fo,l=Math.floor(t/n),a=[];let i="";return e.split(" ").forEach(r=>{const s=i?i+" "+r:r;s.length>l?(a.push(i),i=r):i=s}),i&&a.push(i),a}class To{constructor(){Ce(this,"elements",[]);Ce(this,"_width");Ce(this,"_height")}width(t){return this._width=t,this}height(t){return this._height=t,this}group(t,o){const n=ut(t);return this.elements.push(`<g ${n}>`),o(this),this.elements.push("</g>"),this}rect(t){return this.elements.push(xe("rect",t)),this}text(t,o){const n=xe("text",t,o);return this.elements.push(n),this}textBlock(t,o,n){return this.text(t,o.map((l,a)=>{const i=a===0?0:n;return xe("tspan",{x:t.x,dy:i},l)}).join(""))}build(t=!1){const o=this.elements.join(`
`),n={xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${this._width} ${this._height}`};return t&&(n.width=this._width,n.height=this._height),xe("svg",n,o)}}function Lo(){return new To}function xe(e,t,o=""){const n=ut(t);return`<${e} ${n}>${o}</${e}>`}function ut(e){return Object.entries(e).filter(([,t])=>t!==void 0).map(([t,o])=>`${t}="${o}"`).join(" ")}function Me(e,t,{forceSize:o}={forceSize:!1}){const n=[];t=t,Object.entries(e).forEach(([r,s])=>{let d=0;const u=Object.entries(s).map(([v,g])=>{const y=g.map(N=>{const M=Ne(N,t.tower.width-2*t.tower.padding,t.box.fontSize),ee=M.length*t.box.fontSize+t.box.padding*2;return{title:M,height:ee}}),L=Ne(v,t.tower.width,t.tower.fontSize),F=L.length*t.tower.fontSize,I=y.map(N=>N.height).reduce((N,M)=>N+M+t.box.gap,0),W=F+I+t.tower.padding*3;return W>d&&(d=W),{title:L,height:W,boxes:y}}),p=u.length*t.tower.width+(u.length-1)*t.tower.gap+t.block.padding*2,f=Ne(r,p,t.block.fontSize),m=d+f.length*t.block.fontSize+t.block.padding*2;n.push({title:f,width:p,height:m,towers:u})});const l=Math.max(...n.map(r=>r.height))+t.block.padding*2,a=Lo();let i=t.block.margin;return n.forEach(r=>{a.group({transform:`translate(${i}, ${t.block.margin})`},s=>{s.rect({x:0,y:0,width:r.width,height:l,fill:t.block.backgroundColor,stroke:t.block.strokeColor,strokeWidth:2,rx:10}),s.textBlock({x:t.block.padding,y:t.block.fontSize+t.block.padding,"font-family":t.block.fontFamily,"font-size":t.block.fontSize,fill:t.block.textColor},r.title,t.block.fontSize);let d=t.block.padding;r.towers.forEach(u=>{const p=l-t.block.padding-u.height;s.group({transform:`translate(${d}, ${p})`},f=>{f.rect({x:0,y:0,width:t.tower.width,height:u.height,fill:t.tower.backgroundColor,stroke:t.tower.strokeColor,"stroke-width":2,rx:10}),f.textBlock({x:t.tower.padding,y:t.tower.fontSize+t.tower.padding,"font-family":t.tower.fontFamily,"font-size":t.tower.fontSize,fill:t.tower.textColor},u.title,t.tower.fontSize);let m=u.title.length*t.tower.fontSize+t.tower.padding*2;u.boxes.forEach(v=>{f.rect({x:t.tower.padding,y:m,width:t.tower.width-t.tower.padding*2,height:v.height,fill:t.box.backgroundColor,stroke:t.box.strokeColor,"stroke-width":1,rx:10}),f.textBlock({x:t.tower.padding+t.box.padding,y:m+t.box.fontSize+t.box.padding,"font-family":t.box.fontFamily,"font-size":t.box.fontSize,fill:t.box.textColor},v.title,t.box.fontSize),m+=v.height+t.box.gap})}),d+=t.tower.width+t.tower.gap})}),i+=r.width+t.block.padding*2+t.block.gap}),a.width(i).height(l+t.block.margin*2).build(o)}async function Ao(e){console.log("handleFileUpload:",e);const t=e.target.files[0];if(!t)throw new Error("No file selected.");const o=await t.arrayBuffer();try{const n=Ut(o),l=n.SheetNames[0],a=Fe.sheet_to_json(n.Sheets[l],{header:1});if(a.length===0)throw new Error("The file appears to be empty.");return a}catch(n){throw new Error(`Error processing file: ${n.message}`)}}function Xe(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function we(){let e=[],t={addEventListener(o,n,l,a){return o.addEventListener(n,l,a),t.add(()=>o.removeEventListener(n,l,a))},requestAnimationFrame(...o){let n=requestAnimationFrame(...o);t.add(()=>cancelAnimationFrame(n))},nextFrame(...o){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...o)})},setTimeout(...o){let n=setTimeout(...o);t.add(()=>clearTimeout(n))},microTask(...o){let n={current:!0};return Xe(()=>{n.current&&o[0]()}),t.add(()=>{n.current=!1})},style(o,n,l){let a=o.style.getPropertyValue(n);return Object.assign(o.style,{[n]:l}),this.add(()=>{Object.assign(o.style,{[n]:a})})},group(o){let n=we();return o(n),this.add(()=>n.dispose())},add(o){return e.push(o),()=>{let n=e.indexOf(o);if(n>=0)for(let l of e.splice(n,1))l()}},dispose(){for(let o of e.splice(0))o()}};return t}var tt;let Oo=Symbol("headlessui.useid"),Do=0;const Ye=(tt=Pt)!=null?tt:function(){return V(Oo,()=>`${++Do}`)()};function S(e){var t;if(e==null||e.value==null)return null;let o=(t=e.value.$el)!=null?t:e.value;return o instanceof Node?o:null}function Y(e,t,...o){if(e in t){let l=t[e];return typeof l=="function"?l(...o):l}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Y),n}var _o=Object.defineProperty,Po=(e,t,o)=>t in e?_o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,ot=(e,t,o)=>(Po(e,typeof t!="symbol"?t+"":t,o),o);let No=class{constructor(){ot(this,"current",this.detect()),ot(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},ye=new No;function fe(e){if(ye.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=S(e);if(t)return t.ownerDocument}return document}let je=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var oe=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(oe||{}),dt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(dt||{}),Mo=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Mo||{});function zo(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(je)).sort((t,o)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(o.tabIndex||Number.MAX_SAFE_INTEGER)))}var ct=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(ct||{});function Ro(e,t=0){var o;return e===((o=fe(e))==null?void 0:o.body)?!1:Y(t,{0(){return e.matches(je)},1(){let n=e;for(;n!==null;){if(n.matches(je))return!0;n=n.parentElement}return!1}})}var Bo=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Bo||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ie(e){e==null||e.focus({preventScroll:!0})}let jo=["textarea","input"].join(",");function Ho(e){var t,o;return(o=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,jo))!=null?o:!1}function Uo(e,t=o=>o){return e.slice().sort((o,n)=>{let l=t(o),a=t(n);if(l===null||a===null)return 0;let i=l.compareDocumentPosition(a);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Te(e,t,{sorted:o=!0,relativeTo:n=null,skipElements:l=[]}={}){var a;let i=(a=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?a:document,r=Array.isArray(e)?o?Uo(e):e:zo(e);l.length>0&&r.length>1&&(r=r.filter(v=>!l.includes(v))),n=n??i.activeElement;let s=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,r.indexOf(n))-1;if(t&4)return Math.max(0,r.indexOf(n))+1;if(t&8)return r.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},p=0,f=r.length,m;do{if(p>=f||p+f<=0)return 0;let v=d+p;if(t&16)v=(v+f)%f;else{if(v<0)return 3;if(v>=f)return 1}m=r[v],m==null||m.focus(u),p+=s}while(m!==i.activeElement);return t&6&&Ho(m)&&m.select(),2}function ft(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Vo(){return/Android/gi.test(window.navigator.userAgent)}function Io(){return ft()||Vo()}function Ee(e,t,o){ye.isServer||q(n=>{document.addEventListener(e,t,o),n(()=>document.removeEventListener(e,t,o))})}function vt(e,t,o){ye.isServer||q(n=>{window.addEventListener(e,t,o),n(()=>window.removeEventListener(e,t,o))})}function Wo(e,t,o=b(()=>!0)){function n(a,i){if(!o.value||a.defaultPrevented)return;let r=i(a);if(r===null||!r.getRootNode().contains(r))return;let s=function d(u){return typeof u=="function"?d(u()):Array.isArray(u)||u instanceof Set?u:[u]}(e);for(let d of s){if(d===null)continue;let u=d instanceof HTMLElement?d:S(d);if(u!=null&&u.contains(r)||a.composed&&a.composedPath().includes(u))return}return!Ro(r,ct.Loose)&&r.tabIndex!==-1&&a.preventDefault(),t(a,r)}let l=h(null);Ee("pointerdown",a=>{var i,r;o.value&&(l.value=((r=(i=a.composedPath)==null?void 0:i.call(a))==null?void 0:r[0])||a.target)},!0),Ee("mousedown",a=>{var i,r;o.value&&(l.value=((r=(i=a.composedPath)==null?void 0:i.call(a))==null?void 0:r[0])||a.target)},!0),Ee("click",a=>{Io()||l.value&&(n(a,()=>l.value),l.value=null)},!0),Ee("touchend",a=>n(a,()=>a.target instanceof HTMLElement?a.target:null),!0),vt("blur",a=>n(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var Le=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Le||{}),ne=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ne||{});function Z({visible:e=!0,features:t=0,ourProps:o,theirProps:n,...l}){var a;let i=pt(n,o),r=Object.assign(l,{props:i});if(e||t&2&&i.static)return ze(r);if(t&1){let s=(a=i.unmount)==null||a?0:1;return Y(s,{0(){return null},1(){return ze({...l,props:{...i,hidden:!0,style:{display:"none"}}})}})}return ze(r)}function ze({props:e,attrs:t,slots:o,slot:n,name:l}){var a,i;let{as:r,...s}=ht(e,["unmount","static"]),d=(a=o.default)==null?void 0:a.call(o,n),u={};if(n){let p=!1,f=[];for(let[m,v]of Object.entries(n))typeof v=="boolean"&&(p=!0),v===!0&&f.push(m);p&&(u["data-headlessui-state"]=f.join(" "))}if(r==="template"){if(d=mt(d??[]),Object.keys(s).length>0||Object.keys(t).length>0){let[p,...f]=d??[];if(!Go(p)||f.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${l} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(s).concat(Object.keys(t)).map(g=>g.trim()).filter((g,y,L)=>L.indexOf(g)===y).sort((g,y)=>g.localeCompare(y)).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let m=pt((i=p.props)!=null?i:{},s,u),v=Nt(p,m,!0);for(let g in m)g.startsWith("on")&&(v.props||(v.props={}),v.props[g]=m[g]);return v}return Array.isArray(d)&&d.length===1?d[0]:d}return D(r,Object.assign({},s,u),{default:()=>d})}function mt(e){return e.flatMap(t=>t.type===it?mt(t.children):[t])}function pt(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},o={};for(let n of e)for(let l in n)l.startsWith("on")&&typeof n[l]=="function"?(o[l]!=null||(o[l]=[]),o[l].push(n[l])):t[l]=n[l];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(o).map(n=>[n,void 0])));for(let n in o)Object.assign(t,{[n](l,...a){let i=o[n];for(let r of i){if(l instanceof Event&&l.defaultPrevented)return;r(l,...a)}}});return t}function ht(e,t=[]){let o=Object.assign({},e);for(let n of t)n in o&&delete o[n];return o}function Go(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var Ae=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ae||{});let He=K({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:o}){return()=>{var n;let{features:l,...a}=e,i={"aria-hidden":(l&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(l&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(l&4)===4&&(l&2)!==2&&{display:"none"}}};return Z({ourProps:i,theirProps:a,slot:{},attrs:o,slots:t,name:"Hidden"})}}}),gt=Symbol("Context");var R=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(R||{});function qo(){return Ke()!==null}function Ke(){return V(gt,null)}function Xo(e){X(gt,e)}var bt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(bt||{});function Yo(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let re=[];Yo(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&re[0]!==t.target&&(re.unshift(t.target),re=re.filter(o=>o!=null&&o.isConnected),re.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function wt(e,t,o,n){ye.isServer||q(l=>{e=e??window,e.addEventListener(t,o,n),l(()=>e.removeEventListener(t,o,n))})}var be=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(be||{});function Ko(){let e=h(0);return vt("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function yt(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let o of e.value){let n=S(o);n instanceof HTMLElement&&t.add(n)}return t}var kt=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(kt||{});let he=Object.assign(K({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:h(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:o,expose:n}){let l=h(null);n({el:l,$el:l});let a=b(()=>fe(l)),i=h(!1);B(()=>i.value=!0),J(()=>i.value=!1),Jo({ownerDocument:a},b(()=>i.value&&!!(e.features&16)));let r=Zo({ownerDocument:a,container:l,initialFocus:b(()=>e.initialFocus)},b(()=>i.value&&!!(e.features&2)));en({ownerDocument:a,container:l,containers:e.containers,previousActiveElement:r},b(()=>i.value&&!!(e.features&8)));let s=Ko();function d(m){let v=S(l);v&&(g=>g())(()=>{Y(s.value,{[be.Forwards]:()=>{Te(v,oe.First,{skipElements:[m.relatedTarget]})},[be.Backwards]:()=>{Te(v,oe.Last,{skipElements:[m.relatedTarget]})}})})}let u=h(!1);function p(m){m.key==="Tab"&&(u.value=!0,requestAnimationFrame(()=>{u.value=!1}))}function f(m){if(!i.value)return;let v=yt(e.containers);S(l)instanceof HTMLElement&&v.add(S(l));let g=m.relatedTarget;g instanceof HTMLElement&&g.dataset.headlessuiFocusGuard!=="true"&&(Ct(v,g)||(u.value?Te(S(l),Y(s.value,{[be.Forwards]:()=>oe.Next,[be.Backwards]:()=>oe.Previous})|oe.WrapAround,{relativeTo:m.target}):m.target instanceof HTMLElement&&ie(m.target)))}return()=>{let m={},v={ref:l,onKeydown:p,onFocusout:f},{features:g,initialFocus:y,containers:L,...F}=e;return D(it,[!!(g&4)&&D(He,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:Ae.Focusable}),Z({ourProps:v,theirProps:{...t,...F},slot:m,attrs:t,slots:o,name:"FocusTrap"}),!!(g&4)&&D(He,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:Ae.Focusable})])}}}),{features:kt});function Qo(e){let t=h(re.slice());return se([e],([o],[n])=>{n===!0&&o===!1?Xe(()=>{t.value.splice(0)}):n===!1&&o===!0&&(t.value=re.slice())},{flush:"post"}),()=>{var o;return(o=t.value.find(n=>n!=null&&n.isConnected))!=null?o:null}}function Jo({ownerDocument:e},t){let o=Qo(t);B(()=>{q(()=>{var n,l;t.value||((n=e.value)==null?void 0:n.activeElement)===((l=e.value)==null?void 0:l.body)&&ie(o())},{flush:"post"})}),J(()=>{t.value&&ie(o())})}function Zo({ownerDocument:e,container:t,initialFocus:o},n){let l=h(null),a=h(!1);return B(()=>a.value=!0),J(()=>a.value=!1),B(()=>{se([t,o,n],(i,r)=>{if(i.every((d,u)=>(r==null?void 0:r[u])===d)||!n.value)return;let s=S(t);s&&Xe(()=>{var d,u;if(!a.value)return;let p=S(o),f=(d=e.value)==null?void 0:d.activeElement;if(p){if(p===f){l.value=f;return}}else if(s.contains(f)){l.value=f;return}p?ie(p):Te(s,oe.First|oe.NoScroll)===dt.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),l.value=(u=e.value)==null?void 0:u.activeElement})},{immediate:!0,flush:"post"})}),l}function en({ownerDocument:e,container:t,containers:o,previousActiveElement:n},l){var a;wt((a=e.value)==null?void 0:a.defaultView,"focus",i=>{if(!l.value)return;let r=yt(o);S(t)instanceof HTMLElement&&r.add(S(t));let s=n.value;if(!s)return;let d=i.target;d&&d instanceof HTMLElement?Ct(r,d)?(n.value=d,ie(d)):(i.preventDefault(),i.stopPropagation(),ie(s)):ie(n.value)},!0)}function Ct(e,t){for(let o of e)if(o.contains(t))return!0;return!1}function tn(e){let t=Mt(e.getSnapshot());return J(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function on(e,t){let o=e(),n=new Set;return{getSnapshot(){return o},subscribe(l){return n.add(l),()=>n.delete(l)},dispatch(l,...a){let i=t[l].call(o,...a);i&&(o=i,n.forEach(r=>r()))}}}function nn(){let e;return{before({doc:t}){var o;let n=t.documentElement;e=((o=t.defaultView)!=null?o:window).innerWidth-n.clientWidth},after({doc:t,d:o}){let n=t.documentElement,l=n.clientWidth-n.offsetWidth,a=e-l;o.style(n,"paddingRight",`${a}px`)}}}function ln(){return ft()?{before({doc:e,d:t,meta:o}){function n(l){return o.containers.flatMap(a=>a()).some(a=>a.contains(l))}t.microTask(()=>{var l;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let r=we();r.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>r.dispose()))}let a=(l=window.scrollY)!=null?l:window.pageYOffset,i=null;t.addEventListener(e,"click",r=>{if(r.target instanceof HTMLElement)try{let s=r.target.closest("a");if(!s)return;let{hash:d}=new URL(s.href),u=e.querySelector(d);u&&!n(u)&&(i=u)}catch{}},!0),t.addEventListener(e,"touchstart",r=>{if(r.target instanceof HTMLElement)if(n(r.target)){let s=r.target;for(;s.parentElement&&n(s.parentElement);)s=s.parentElement;t.style(s,"overscrollBehavior","contain")}else t.style(r.target,"touchAction","none")}),t.addEventListener(e,"touchmove",r=>{if(r.target instanceof HTMLElement){if(r.target.tagName==="INPUT")return;if(n(r.target)){let s=r.target;for(;s.parentElement&&s.dataset.headlessuiPortal!==""&&!(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth);)s=s.parentElement;s.dataset.headlessuiPortal===""&&r.preventDefault()}else r.preventDefault()}},{passive:!1}),t.add(()=>{var r;let s=(r=window.scrollY)!=null?r:window.pageYOffset;a!==s&&window.scrollTo(0,a),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function rn(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function an(e){let t={};for(let o of e)Object.assign(t,o(t));return t}let ae=on(()=>new Map,{PUSH(e,t){var o;let n=(o=this.get(e))!=null?o:{doc:e,count:0,d:we(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let o=this.get(e);return o&&(o.count--,o.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:o}){let n={doc:e,d:t,meta:an(o)},l=[ln(),nn(),rn()];l.forEach(({before:a})=>a==null?void 0:a(n)),l.forEach(({after:a})=>a==null?void 0:a(n))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ae.subscribe(()=>{let e=ae.getSnapshot(),t=new Map;for(let[o]of e)t.set(o,o.documentElement.style.overflow);for(let o of e.values()){let n=t.get(o.doc)==="hidden",l=o.count!==0;(l&&!n||!l&&n)&&ae.dispatch(o.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",o),o.count===0&&ae.dispatch("TEARDOWN",o)}});function sn(e,t,o){let n=tn(ae),l=b(()=>{let a=e.value?n.value.get(e.value):void 0;return a?a.count>0:!1});return se([e,t],([a,i],[r],s)=>{if(!a||!i)return;ae.dispatch("PUSH",a,o);let d=!1;s(()=>{d||(ae.dispatch("POP",r??a,o),d=!0)})},{immediate:!0}),l}let Re=new Map,ge=new Map;function nt(e,t=h(!0)){q(o=>{var n;if(!t.value)return;let l=S(e);if(!l)return;o(function(){var i;if(!l)return;let r=(i=ge.get(l))!=null?i:1;if(r===1?ge.delete(l):ge.set(l,r-1),r!==1)return;let s=Re.get(l);s&&(s["aria-hidden"]===null?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",s["aria-hidden"]),l.inert=s.inert,Re.delete(l))});let a=(n=ge.get(l))!=null?n:0;ge.set(l,a+1),a===0&&(Re.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)})}function un({defaultContainers:e=[],portals:t,mainTreeNodeRef:o}={}){let n=h(null),l=fe(n);function a(){var i,r,s;let d=[];for(let u of e)u!==null&&(u instanceof HTMLElement?d.push(u):"value"in u&&u.value instanceof HTMLElement&&d.push(u.value));if(t!=null&&t.value)for(let u of t.value)d.push(u);for(let u of(i=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?i:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(u.contains(S(n))||u.contains((s=(r=S(n))==null?void 0:r.getRootNode())==null?void 0:s.host)||d.some(p=>u.contains(p))||d.push(u));return d}return{resolveContainers:a,contains(i){return a().some(r=>r.contains(i))},mainTreeNodeRef:n,MainTreeNode(){return o!=null?null:D(He,{features:Ae.Hidden,ref:n})}}}let xt=Symbol("ForcePortalRootContext");function dn(){return V(xt,!1)}let lt=K({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:o}){return X(xt,e.force),()=>{let{force:n,...l}=e;return Z({theirProps:l,ourProps:{},slot:{},slots:t,attrs:o,name:"ForcePortalRoot"})}}}),Et=Symbol("StackContext");var Ue=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ue||{});function cn(){return V(Et,()=>{})}function fn({type:e,enabled:t,element:o,onUpdate:n}){let l=cn();function a(...i){n==null||n(...i),l(...i)}B(()=>{se(t,(i,r)=>{i?a(0,e,o):r===!0&&a(1,e,o)},{immediate:!0,flush:"sync"})}),J(()=>{t.value&&a(1,e,o)}),X(Et,a)}let vn=Symbol("DescriptionContext");function mn({slot:e=h({}),name:t="Description",props:o={}}={}){let n=h([]);function l(a){return n.value.push(a),()=>{let i=n.value.indexOf(a);i!==-1&&n.value.splice(i,1)}}return X(vn,{register:l,slot:e,name:t,props:o}),b(()=>n.value.length>0?n.value.join(" "):void 0)}function pn(e){let t=fe(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let o=t.getElementById("headlessui-portal-root");if(o)return o;let n=t.createElement("div");return n.setAttribute("id","headlessui-portal-root"),t.body.appendChild(n)}const Ve=new WeakMap;function hn(e){var t;return(t=Ve.get(e))!=null?t:0}function rt(e,t){let o=t(hn(e));return o<=0?Ve.delete(e):Ve.set(e,o),o}let gn=K({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:o}){let n=h(null),l=b(()=>fe(n)),a=dn(),i=V(St,null),r=h(a===!0||i==null?pn(n.value):i.resolveTarget());r.value&&rt(r.value,f=>f+1);let s=h(!1);B(()=>{s.value=!0}),q(()=>{a||i!=null&&(r.value=i.resolveTarget())});let d=V(Ie,null),u=!1,p=Bt();return se(n,()=>{if(u||!d)return;let f=S(n);f&&(J(d.register(f),p),u=!0)}),J(()=>{var f,m;let v=(f=l.value)==null?void 0:f.getElementById("headlessui-portal-root");!v||r.value!==v||rt(r.value,g=>g-1)||r.value.children.length>0||(m=r.value.parentElement)==null||m.removeChild(r.value)}),()=>{if(!s.value||r.value===null)return null;let f={ref:n,"data-headlessui-portal":""};return D(zt,{to:r.value},Z({ourProps:f,theirProps:e,slot:{},attrs:o,slots:t,name:"Portal"}))}}}),Ie=Symbol("PortalParentContext");function bn(){let e=V(Ie,null),t=h([]);function o(a){return t.value.push(a),e&&e.register(a),()=>n(a)}function n(a){let i=t.value.indexOf(a);i!==-1&&t.value.splice(i,1),e&&e.unregister(a)}let l={register:o,unregister:n,portals:t};return[t,K({name:"PortalWrapper",setup(a,{slots:i}){return X(Ie,l),()=>{var r;return(r=i.default)==null?void 0:r.call(i)}}})]}let St=Symbol("PortalGroupContext"),wn=K({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:o}){let n=Rt({resolveTarget(){return e.target}});return X(St,n),()=>{let{target:l,...a}=e;return Z({theirProps:a,ourProps:{},slot:{},attrs:t,slots:o,name:"PortalGroup"})}}});var yn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(yn||{});let We=Symbol("DialogContext");function $t(e){let t=V(We,null);if(t===null){let o=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,$t),o}return t}let Se="DC8F892D-2EBD-447C-A4C8-A03058436FF4",kn=K({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Se},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:t,attrs:o,slots:n,expose:l}){var a,i;let r=(a=e.id)!=null?a:`headlessui-dialog-${Ye()}`,s=h(!1);B(()=>{s.value=!0});let d=!1,u=b(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(d||(d=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),p=h(0),f=Ke(),m=b(()=>e.open===Se&&f!==null?(f.value&R.Open)===R.Open:e.open),v=h(null),g=b(()=>fe(v));if(l({el:v,$el:v}),!(e.open!==Se||f!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof m.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${m.value===Se?void 0:e.open}`);let y=b(()=>s.value&&m.value?0:1),L=b(()=>y.value===0),F=b(()=>p.value>1),I=V(We,null)!==null,[W,N]=bn(),{resolveContainers:M,mainTreeNodeRef:ee,MainTreeNode:te}=un({portals:W,defaultContainers:[b(()=>{var x;return(x=Q.panelRef.value)!=null?x:v.value})]}),w=b(()=>F.value?"parent":"leaf"),C=b(()=>f!==null?(f.value&R.Closing)===R.Closing:!1),A=b(()=>I||C.value?!1:L.value),z=b(()=>{var x,E,j;return(j=Array.from((E=(x=g.value)==null?void 0:x.querySelectorAll("body > *"))!=null?E:[]).find(H=>H.id==="headlessui-portal-root"?!1:H.contains(S(ee))&&H instanceof HTMLElement))!=null?j:null});nt(z,A);let $=b(()=>F.value?!0:L.value),_=b(()=>{var x,E,j;return(j=Array.from((E=(x=g.value)==null?void 0:x.querySelectorAll("[data-headlessui-portal]"))!=null?E:[]).find(H=>H.contains(S(ee))&&H instanceof HTMLElement))!=null?j:null});nt(_,$),fn({type:"Dialog",enabled:b(()=>y.value===0),element:v,onUpdate:(x,E)=>{if(E==="Dialog")return Y(x,{[Ue.Add]:()=>p.value+=1,[Ue.Remove]:()=>p.value-=1})}});let G=mn({name:"DialogDescription",slot:b(()=>({open:m.value}))}),T=h(null),Q={titleId:T,panelRef:h(null),dialogState:y,setTitleId(x){T.value!==x&&(T.value=x)},close(){t("close",!1)}};X(We,Q);let ve=b(()=>!(!L.value||F.value));Wo(M,(x,E)=>{x.preventDefault(),Q.close(),jt(()=>E==null?void 0:E.focus())},ve);let me=b(()=>!(F.value||y.value!==0));wt((i=g.value)==null?void 0:i.defaultView,"keydown",x=>{me.value&&(x.defaultPrevented||x.key===bt.Escape&&(x.preventDefault(),x.stopPropagation(),Q.close()))});let Ze=b(()=>!(C.value||y.value!==0||I));return sn(g,Ze,x=>{var E;return{containers:[...(E=x.containers)!=null?E:[],M]}}),q(x=>{if(y.value!==0)return;let E=S(v);if(!E)return;let j=new ResizeObserver(H=>{for(let De of H){let ke=De.target.getBoundingClientRect();ke.x===0&&ke.y===0&&ke.width===0&&ke.height===0&&Q.close()}});j.observe(E),x(()=>j.disconnect())}),()=>{let{open:x,initialFocus:E,...j}=e,H={...o,ref:v,id:r,role:u.value,"aria-modal":y.value===0?!0:void 0,"aria-labelledby":T.value,"aria-describedby":G.value},De={open:y.value===0};return D(lt,{force:!0},()=>[D(gn,()=>D(wn,{target:v.value},()=>D(lt,{force:!1},()=>D(he,{initialFocus:E,containers:M,features:L.value?Y(w.value,{parent:he.features.RestoreFocus,leaf:he.features.All&~he.features.FocusLock}):he.features.None},()=>D(N,{},()=>Z({ourProps:H,theirProps:{...j,...o},slot:De,attrs:o,slots:n,visible:y.value===0,features:Le.RenderStrategy|Le.Static,name:"Dialog"})))))),D(te)])}}}),Cn=K({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:o,expose:n}){var l;let a=(l=e.id)!=null?l:`headlessui-dialog-panel-${Ye()}`,i=$t("DialogPanel");n({el:i.panelRef,$el:i.panelRef});function r(s){s.stopPropagation()}return()=>{let{...s}=e,d={id:a,ref:i.panelRef,onClick:r};return Z({ourProps:d,theirProps:s,slot:{open:i.dialogState.value===0},attrs:t,slots:o,name:"DialogPanel"})}}});function xn(e){let t={called:!1};return(...o)=>{if(!t.called)return t.called=!0,e(...o)}}function Be(e,...t){e&&t.length>0&&e.classList.add(...t)}function $e(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Ge=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(Ge||{});function En(e,t){let o=we();if(!e)return o.dispose;let{transitionDuration:n,transitionDelay:l}=getComputedStyle(e),[a,i]=[n,l].map(r=>{let[s=0]=r.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,u)=>u-d);return s});return a!==0?o.setTimeout(()=>t("finished"),a+i):t("finished"),o.add(()=>t("cancelled")),o.dispose}function at(e,t,o,n,l,a){let i=we(),r=a!==void 0?xn(a):()=>{};return $e(e,...l),Be(e,...t,...o),i.nextFrame(()=>{$e(e,...o),Be(e,...n),i.add(En(e,s=>($e(e,...n,...t),Be(e,...l),r(s))))}),i.add(()=>$e(e,...t,...o,...n,...l)),i.add(()=>r("cancelled")),i.dispose}function le(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let Qe=Symbol("TransitionContext");var Sn=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Sn||{});function $n(){return V(Qe,null)!==null}function Fn(){let e=V(Qe,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Tn(){let e=V(Je,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let Je=Symbol("NestingContext");function Oe(e){return"children"in e?Oe(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Ft(e){let t=h([]),o=h(!1);B(()=>o.value=!0),J(()=>o.value=!1);function n(a,i=ne.Hidden){let r=t.value.findIndex(({id:s})=>s===a);r!==-1&&(Y(i,{[ne.Unmount](){t.value.splice(r,1)},[ne.Hidden](){t.value[r].state="hidden"}}),!Oe(t)&&o.value&&(e==null||e()))}function l(a){let i=t.value.find(({id:r})=>r===a);return i?i.state!=="visible"&&(i.state="visible"):t.value.push({id:a,state:"visible"}),()=>n(a,ne.Unmount)}return{children:t,register:l,unregister:n}}let Tt=Le.RenderStrategy,qe=K({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:o,slots:n,expose:l}){let a=h(0);function i(){a.value|=R.Opening,t("beforeEnter")}function r(){a.value&=~R.Opening,t("afterEnter")}function s(){a.value|=R.Closing,t("beforeLeave")}function d(){a.value&=~R.Closing,t("afterLeave")}if(!$n()&&qo())return()=>D(Lt,{...e,onBeforeEnter:i,onAfterEnter:r,onBeforeLeave:s,onAfterLeave:d},n);let u=h(null),p=b(()=>e.unmount?ne.Unmount:ne.Hidden);l({el:u,$el:u});let{show:f,appear:m}=Fn(),{register:v,unregister:g}=Tn(),y=h(f.value?"visible":"hidden"),L={value:!0},F=Ye(),I={value:!1},W=Ft(()=>{!I.value&&y.value!=="hidden"&&(y.value="hidden",g(F),d())});B(()=>{let $=v(F);J($)}),q(()=>{if(p.value===ne.Hidden&&F){if(f.value&&y.value!=="visible"){y.value="visible";return}Y(y.value,{hidden:()=>g(F),visible:()=>v(F)})}});let N=le(e.enter),M=le(e.enterFrom),ee=le(e.enterTo),te=le(e.entered),w=le(e.leave),C=le(e.leaveFrom),A=le(e.leaveTo);B(()=>{q(()=>{if(y.value==="visible"){let $=S(u);if($ instanceof Comment&&$.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function z($){let _=L.value&&!m.value,G=S(u);!G||!(G instanceof HTMLElement)||_||(I.value=!0,f.value&&i(),f.value||s(),$(f.value?at(G,N,M,ee,te,T=>{I.value=!1,T===Ge.Finished&&r()}):at(G,w,C,A,te,T=>{I.value=!1,T===Ge.Finished&&(Oe(W)||(y.value="hidden",g(F),d()))})))}return B(()=>{se([f],($,_,G)=>{z(G),L.value=!1},{immediate:!0})}),X(Je,W),Xo(b(()=>Y(y.value,{visible:R.Open,hidden:R.Closed})|a.value)),()=>{let{appear:$,show:_,enter:G,enterFrom:T,enterTo:Q,entered:ve,leave:me,leaveFrom:Ze,leaveTo:x,...E}=e,j={ref:u},H={...E,...m.value&&f.value&&ye.isServer?{class:Ht([o.class,E.class,...N,...M])}:{}};return Z({theirProps:H,ourProps:j,slot:{},slots:n,attrs:o,features:Tt,visible:y.value==="visible",name:"TransitionChild"})}}}),Ln=qe,Lt=K({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:o,slots:n}){let l=Ke(),a=b(()=>e.show===null&&l!==null?(l.value&R.Open)===R.Open:e.show);q(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let i=h(a.value?"visible":"hidden"),r=Ft(()=>{i.value="hidden"}),s=h(!0),d={show:a,appear:b(()=>e.appear||!s.value)};return B(()=>{q(()=>{s.value=!1,a.value?i.value="visible":Oe(r)||(i.value="hidden")})}),X(Je,r),X(Qe,d),()=>{let u=ht(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),p={unmount:e.unmount};return Z({ourProps:{...p,as:"template"},theirProps:{},slot:{},slots:{...n,default:()=>[D(Ln,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...o,...p,...u},n.default)]},attrs:{},features:Tt,visible:i.value==="visible",name:"Transition"})}}});const An={id:"diagram",class:"content-container"},On={id:"buttonbar",class:"w-full flex flex-row justify-center mb-8"},Dn={class:"fixed inset-0 overflow-y-auto"},_n={class:"flex min-h-full items-center justify-center p-4 mt-28 mb-16 text-center"},Pn={class:"flex flex-col justify-start"},Nn={id:"panelcontainer",class:"flex flex-row flex-grow w-full max-h-[80vh] bg-white"},Mn={key:0,class:"h-full w-full"},zn=["data"],Rn={key:1,class:"text-gray-500"},Bn={key:0,class:"mt-6 p-4 bg-white rounded shadow"},jn={class:"h-auto w-full overflow-auto"},Hn=["innerHTML"],Un={key:1,class:"text-gray-500"},qn={__name:"diagram",setup(e){const t=st(),o=h(t.gridData),n=h(t.diagramData),l=h(t.svg),a=h(t.blockCount),i=h(t.towerCount),r=h(t.fileName),s=h(null),d=h(!1);let u=h(.5),p=h(.5),f=!1,m=0;function v(){d.value=!1,l.value=Me(n.value,t.settings,{forceSize:!0})}function g(){d.value=!0}async function y(w){try{const C=await Ao(w);r.value=w.target.files[0].name.split(".")[0],o.value=C,te(C),t.updateFileName(r.value),t.updateGridData(C),console.log("File processed successfully:",C)}catch(C){console.error("Error uploading file:",C.message),alert(`File upload failed: ${C.message}`)}}B(()=>{o.value.length&&te(o.value)}),se(o,w=>{te(w)},{deep:!0});function L(){s.value&&s.value.click()}function F(w){o.value=w,t.updateGridData(w)}function I(w){f=!0,m=w.clientX,document.addEventListener("mousemove",W),document.addEventListener("mouseup",N)}function W(w){if(f){const C=w.clientX-m,A=document.getElementById("panelcontainer").offsetWidth,z=u.value+p.value,$=u.value+C/A,_=z-$;$>=.1&&_>=.1&&(u.value=$,p.value=_,m=w.clientX)}}function N(){f=!1,document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",N)}function M(){if(!n.value){alert("No SVG content to download.");return}const w=Me(n.value,t.settings,{forceSize:!1}),C=new Blob([w],{type:"image/svg+xml"}),A=document.createElement("a"),z=URL.createObjectURL(C);A.href=z,A.download=`${r.value}.svg`,A.click(),URL.revokeObjectURL(z)}const ee=()=>{if(!o.value.length){alert("No data to download.");return}const w=Fe.json_to_sheet(o.value,{skipHeader:!1}),C=Fe.book_new();Fe.book_append_sheet(C,w,"Sheet1"),Vt(C,`${r.value||"updated-diagram-data"}.xlsx`)};function te(w){let C=0,A=0,z=null,$=null;const _={};w.slice(1).forEach(T=>{var Q,ve,me;(Q=T[0])!=null&&Q.trim()&&(z=T[0],_[z]={},C++),(ve=T[1])!=null&&ve.trim()&&($=T[1],_[z][$]=[],A++),(me=T[2])!=null&&me.trim()&&_[z][$].push(T[2])}),n.value=_;const G=t.settings;l.value=Me(_,G,{forceSize:!0}),a.value=C,i.value=A,t.updateDiagramData(n.value,l.value,C,A)}return(w,C)=>{const A=$o;return de(),ce("div",An,[c("div",On,[c("input",{type:"file",ref_key:"fileInput",ref:s,onChange:y,accept:".xlsx",class:"hidden",style:{display:"none"}},null,544),c("button",{class:"btn-primary",onClick:L},k(w.$t("common.fileUpload")),1),c("button",{class:"btn-primary",onClick:M},k(w.$t("common.downloadSVG")),1),c("button",{class:"btn-primary",onClick:ee},k(w.$t("common.downloadExcel")),1),c("button",{class:"btn-primary",onClick:g},k(w.$t("navbar.menu.settings")),1),ue(P(Lt),{appear:"",show:P(d),as:"template"},{default:pe(()=>[ue(P(kn),{onClose:v,class:"relative z-10"},{default:pe(()=>[ue(P(qe),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:pe(()=>C[0]||(C[0]=[c("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1}),c("div",Dn,[c("div",_n,[ue(P(qe),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:pe(()=>[ue(P(Cn),{class:"w-full max-w-screen-lg transform overflow-hidden rounded-2xl bg-white p-6 align-middle shadow-xl transition-all"},{default:pe(()=>[c("div",Pn,[ue(A,{onFormSubmit:v})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),c("div",Nn,[c("div",{style:et({flex:P(u)}),class:"overflow-auto p-4"},[c("h3",null,k(w.$t("common.fileContent")),1),P(o).length?(de(),ce("div",Mn,[c("canvas-datagrid",{data:P(o),editable:!0,onDataChanged:F},null,40,zn)])):(de(),ce("p",Rn,k(w.$t("common.noContent")),1))],4),c("div",{id:"resizeHandle",class:"w-2 cursor-col-resize",onMousedown:I},null,32),c("div",{style:et({flex:P(p)}),class:"overflow-auto p-4"},[c("h3",null,k(w.$t("common.svgView")),1),P(l)?(de(),ce("div",Bn,[c("div",jn,[c("div",{innerHTML:P(l)},null,8,Hn)])])):(de(),ce("p",Un,k(w.$t("common.svgUnavailable")),1))],4)]),c("p",null,"Blocks: "+k(P(a))+", Towers: "+k(P(i)),1)])}}};export{qn as default};
