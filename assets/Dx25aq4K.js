var _t=Object.defineProperty;var Nt=(e,t,o)=>t in e?_t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var Ee=(e,t,o)=>Nt(e,typeof t!="symbol"?t+"":t,o);import{n as Mt,p as x,o as ce,c as fe,a as d,t as C,q as O,v as R,s as Ne,u as Me,x as dt,y as zt,z as B,f as I,r as p,A as Rt,B as D,F as ct,C as Y,D as G,E as M,G as K,h as ae,H as Bt,T as jt,I as Ht,m as Ut,J as Vt,K as It,_ as Wt,b as de,w as be,L as A,M as Se}from"./D4JHfAKQ.js";import{read as Gt,utils as Ae,writeFile as Xt}from"./C2piJvdv.js";const ft=Mt("dataStore",{state:()=>({fileName:"",gridData:[],diagramData:void 0,svg:"",blockCount:0,towerCount:0,settings:{block:{margin:20,padding:20,gap:10,backgroundColor:"#f5f5f5",strokeColor:"#c8c8c8",fontFamily:"Arial",fontSize:18,textColor:"#000000"},tower:{width:200,padding:10,gap:20,backgroundColor:"#e6e6e6",strokeColor:"#c8c8c8",fontFamily:"Arial",fontSize:16,textColor:"#000000"},box:{padding:10,gap:10,backgroundColor:"#ffffff",strokeColor:"#c8c8c8",fontFamily:"Arial",fontSize:14,textColor:"#000000"}}}),actions:{updateFileName(e){this.fileName=e},updateGridData(e){this.gridData=e},updateDiagramData(e,t,o,n){this.diagramData=e,this.svg=t,this.blockCount=o,this.towerCount=n},updateSettings(e){e.block&&(this.settings.block.backgroundColor=e.block.backgroundColor??this.settings.block.backgroundColor,this.settings.block.strokeColor=e.block.strokeColor??this.settings.block.strokeColor,this.settings.block.fontFamily=e.block.fontFamily??this.settings.block.fontFamily,this.settings.block.fontSize=e.block.fontSize??this.settings.block.fontSize,this.settings.block.textColor=e.block.textColor??this.settings.block.textColor),e.tower&&(this.settings.tower.backgroundColor=e.tower.backgroundColor??this.settings.tower.backgroundColor,this.settings.tower.strokeColor=e.tower.strokeColor??this.settings.tower.strokeColor,this.settings.tower.fontFamily=e.tower.fontFamily??this.settings.tower.fontFamily,this.settings.tower.fontSize=e.tower.fontSize??this.settings.tower.fontSize,this.settings.tower.textColor=e.tower.textColor??this.settings.tower.textColor),e.box&&(this.settings.box.backgroundColor=e.box.backgroundColor??this.settings.box.backgroundColor,this.settings.box.strokeColor=e.box.strokeColor??this.settings.box.strokeColor,this.settings.box.fontFamily=e.box.fontFamily??this.settings.box.fontFamily,this.settings.box.fontSize=e.box.fontSize??this.settings.box.fontSize,this.settings.box.textColor=e.box.textColor??this.settings.box.textColor)},resetData(){this.fileName="",this.gridData=[],this.diagramData=null,this.svg=null,this.blockCount=0,this.towerCount=0}}}),Yt={class:"grid-container"},qt={class:"grid-item"},Kt={for:"blockBackgroundColor"},Qt={class:"grid-item"},Jt={for:"blockStrokeColor"},Zt={class:"grid-item"},eo={for:"blockTextColor"},to={class:"grid-item"},oo={for:"blockFontFamily"},no={class:"grid-item"},lo={for:"blockFontSize"},ro={class:"grid-container"},ao={class:"grid-item"},io={for:"towerBackgroundColor"},so={class:"grid-item"},uo={for:"towerStrokeColor"},co={class:"grid-item"},fo={for:"towerTextColor"},vo={class:"grid-item"},mo={for:"towerFontFamily"},po={class:"grid-item"},ho={for:"towerFontSize"},go={class:"border-b-2 border-green"},bo={class:"grid-container"},wo={class:"grid-item"},yo={for:"boxBackgroundColor"},ko={class:"grid-item"},xo={for:"boxStrokeColor"},Co={class:"grid-item"},Eo={for:"boxTextColor"},So={class:"grid-item"},$o={for:"boxFontFamily"},Fo={class:"grid-item"},To={for:"boxFontSize"},Lo={type:"submit",class:"btn-primary w-fit"},Ao={__name:"MMForm",emits:["form-submit"],setup(e,{emit:t}){const o=t,n=ft(),l=x(()=>n.settings),a=()=>{n.updateSettings(l.value),o("form-submit")};return(i,r)=>(ce(),fe("form",{onSubmit:dt(a,["prevent"])},[d("h3",null,C(i.$t("form.blockSettings")),1),d("div",Yt,[d("div",qt,[d("label",Kt,C(i.$t("form.backgroundColor")),1),O(d("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>l.value.block.backgroundColor=s),id:"blockBackgroundColor",type:"color"},null,512),[[R,l.value.block.backgroundColor]])]),d("div",Qt,[d("label",Jt,C(i.$t("form.borderColor")),1),O(d("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>l.value.block.strokeColor=s),id:"blockStrokeColor",type:"color"},null,512),[[R,l.value.block.strokeColor]])]),d("div",Zt,[d("label",eo,C(i.$t("form.textColor")),1),O(d("input",{"onUpdate:modelValue":r[2]||(r[2]=s=>l.value.block.textColor=s),id:"blockTextColor",type:"color"},null,512),[[R,l.value.block.textColor]])]),d("div",to,[d("label",oo,C(i.$t("form.fontFamily")),1),O(d("select",{"onUpdate:modelValue":r[3]||(r[3]=s=>l.value.block.fontFamily=s),id:"towerFontFamily"},r[15]||(r[15]=[Me('<option value="Arial">Arial</option><option value="&#39;Times New Roman&#39;, Times, serif">Times New Roman</option><option value="Verdana, Geneva, sans-serif">Verdana</option><option value="Tahoma, Geneva, sans-serif">Tahoma</option><option value="&#39;Courier New&#39;, Courier, monospace">Courier New</option><option value="&#39;Georgia&#39;, serif">Georgia</option>',6)]),512),[[Ne,l.value.block.fontFamily]])]),d("div",no,[d("label",lo,C(i.$t("form.fontSize")),1),O(d("input",{"onUpdate:modelValue":r[4]||(r[4]=s=>l.value.block.fontSize=s),id:"blockFontSize",type:"number",placeholder:"18"},null,512),[[R,l.value.block.fontSize]])])]),d("h3",null,C(i.$t("form.towerSettings")),1),d("div",ro,[d("div",ao,[d("label",io,C(i.$t("form.backgroundColor")),1),O(d("input",{"onUpdate:modelValue":r[5]||(r[5]=s=>l.value.tower.backgroundColor=s),id:"towerBackgroundColor",type:"color"},null,512),[[R,l.value.tower.backgroundColor]])]),d("div",so,[d("label",uo,C(i.$t("form.borderColor")),1),O(d("input",{"onUpdate:modelValue":r[6]||(r[6]=s=>l.value.tower.strokeColor=s),id:"towerStrokeColor",type:"color"},null,512),[[R,l.value.tower.strokeColor]])]),d("div",co,[d("label",fo,C(i.$t("form.textColor")),1),O(d("input",{"onUpdate:modelValue":r[7]||(r[7]=s=>l.value.tower.textColor=s),id:"towerTextColor",type:"color"},null,512),[[R,l.value.tower.textColor]])]),d("div",vo,[d("label",mo,C(i.$t("form.fontFamily")),1),O(d("select",{"onUpdate:modelValue":r[8]||(r[8]=s=>l.value.tower.fontFamily=s),id:"towerFontFamily"},r[16]||(r[16]=[Me('<option value="Arial">Arial</option><option value="&#39;Times New Roman&#39;, Times, serif">Times New Roman</option><option value="Verdana, Geneva, sans-serif">Verdana</option><option value="Tahoma, Geneva, sans-serif">Tahoma</option><option value="&#39;Courier New&#39;, Courier, monospace">Courier New</option><option value="&#39;Georgia&#39;, serif">Georgia</option>',6)]),512),[[Ne,l.value.tower.fontFamily]])]),d("div",po,[d("label",ho,C(i.$t("form.fontSize")),1),O(d("input",{"onUpdate:modelValue":r[9]||(r[9]=s=>l.value.tower.fontSize=s),id:"towerFontSize",type:"number",placeholder:"16"},null,512),[[R,l.value.tower.fontSize]])])]),d("h3",go,C(i.$t("form.boxSettings")),1),d("div",bo,[d("div",wo,[d("label",yo,C(i.$t("form.backgroundColor")),1),O(d("input",{"onUpdate:modelValue":r[10]||(r[10]=s=>l.value.box.backgroundColor=s),id:"boxBackgroundColor",type:"color"},null,512),[[R,l.value.box.backgroundColor]])]),d("div",ko,[d("label",xo,C(i.$t("form.borderColor")),1),O(d("input",{"onUpdate:modelValue":r[11]||(r[11]=s=>l.value.box.strokeColor=s),id:"boxStrokeColor",type:"color"},null,512),[[R,l.value.box.strokeColor]])]),d("div",Co,[d("label",Eo,C(i.$t("form.textColor")),1),O(d("input",{"onUpdate:modelValue":r[12]||(r[12]=s=>l.value.box.textColor=s),id:"boxTextColor",type:"color"},null,512),[[R,l.value.box.textColor]])]),d("div",So,[d("label",$o,C(i.$t("form.fontFamily")),1),O(d("select",{"onUpdate:modelValue":r[13]||(r[13]=s=>l.value.box.fontFamily=s),id:"towerFontFamily"},r[17]||(r[17]=[Me('<option value="Arial">Arial</option><option value="&#39;Times New Roman&#39;, Times, serif">Times New Roman</option><option value="Verdana, Geneva, sans-serif">Verdana</option><option value="Tahoma, Geneva, sans-serif">Tahoma</option><option value="&#39;Courier New&#39;, Courier, monospace">Courier New</option><option value="&#39;Georgia&#39;, serif">Georgia</option>',6)]),512),[[Ne,l.value.box.fontFamily]])]),d("div",Fo,[d("label",To,C(i.$t("form.fontSize")),1),O(d("input",{"onUpdate:modelValue":r[14]||(r[14]=s=>l.value.box.fontSize=s),id:"boxFontSize",type:"number",placeholder:"14"},null,512),[[R,l.value.box.fontSize]])])]),d("button",Lo,C(i.$t("form.save")),1)],32))}},Oo=.6;function ze(e,t,o){const n=o*Oo,l=Math.floor(t/n),a=[];let i="";return e.split(" ").forEach(r=>{const s=i?i+" "+r:r;s.length>l?(a.push(i),i=r):i=s}),i&&a.push(i),a}class Do{constructor(){Ee(this,"elements",[]);Ee(this,"_width");Ee(this,"_height")}width(t){return this._width=t,this}height(t){return this._height=t,this}group(t,o){const n=vt(t);return this.elements.push(`<g ${n}>`),o(this),this.elements.push("</g>"),this}rect(t){return this.elements.push($e("rect",t)),this}text(t,o){const n=$e("text",t,o);return this.elements.push(n),this}textBlock(t,o,n){return this.text(t,o.map((l,a)=>{const i=a===0?0:n;return $e("tspan",{x:t.x,dy:i},l)}).join(""))}build(){const t=this.elements.join(`
`),o={xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${this._width} ${this._height}`};return $e("svg",o,t)}}function Po(){return new Do}function $e(e,t,o=""){const n=vt(t);return`<${e} ${n}>${o}</${e}>`}function vt(e){return Object.entries(e).filter(([,t])=>t!==void 0).map(([t,o])=>`${t}="${o}"`).join(" ")}function Re(e,t){const o=[];t=t,Object.entries(e).forEach(([i,r])=>{let s=0;const u=Object.entries(r).map(([m,g])=>{const b=g.map(_=>{const j=ze(_,t.tower.width-2*t.tower.padding,t.box.fontSize),W=j.length*t.box.fontSize+t.box.padding*2;return{title:j,height:W}}),y=ze(m,t.tower.width,t.tower.fontSize),L=y.length*t.tower.fontSize,T=b.map(_=>_.height).reduce((_,j)=>_+j+t.box.gap,0),P=L+T+t.tower.padding*3;return P>s&&(s=P),{title:y,height:P,boxes:b}}),c=u.length*t.tower.width+(u.length-1)*t.tower.gap+t.block.padding*2,h=ze(i,c,t.block.fontSize),f=s+h.length*t.block.fontSize+t.block.padding*2;o.push({title:h,width:c,height:f,towers:u})});const n=Math.max(...o.map(i=>i.height))+t.block.padding*2,l=Po();let a=t.block.margin;return o.forEach(i=>{l.group({transform:`translate(${a}, ${t.block.margin})`},r=>{r.rect({x:0,y:0,width:i.width,height:n,fill:t.block.backgroundColor,stroke:t.block.strokeColor,strokeWidth:2,rx:10}),r.textBlock({x:t.block.padding,y:t.block.fontSize+t.block.padding,"font-family":t.block.fontFamily,"font-size":t.block.fontSize,fill:t.block.textColor},i.title,t.block.fontSize);let s=t.block.padding;i.towers.forEach(u=>{const c=n-t.block.padding-u.height;r.group({transform:`translate(${s}, ${c})`},h=>{h.rect({x:0,y:0,width:t.tower.width,height:u.height,fill:t.tower.backgroundColor,stroke:t.tower.strokeColor,"stroke-width":2,rx:10}),h.textBlock({x:t.tower.padding,y:t.tower.fontSize+t.tower.padding,"font-family":t.tower.fontFamily,"font-size":t.tower.fontSize,fill:t.tower.textColor},u.title,t.tower.fontSize);let f=u.title.length*t.tower.fontSize+t.tower.padding*2;u.boxes.forEach(m=>{h.rect({x:t.tower.padding,y:f,width:t.tower.width-t.tower.padding*2,height:m.height,fill:t.box.backgroundColor,stroke:t.box.strokeColor,"stroke-width":1,rx:10}),h.textBlock({x:t.tower.padding+t.box.padding,y:f+t.box.fontSize+t.box.padding,"font-family":t.box.fontFamily,"font-size":t.box.fontSize,fill:t.box.textColor},m.title,t.box.fontSize),f+=m.height+t.box.gap})}),s+=t.tower.width+t.tower.gap})}),a+=i.width+t.block.padding*2+t.block.gap}),l.width(a).height(n+t.block.margin*2).build()}async function _o(e){console.log("handleFileUpload:",e);const t=e.target.files[0];if(!t)throw new Error("No file selected.");const o=await t.arrayBuffer();try{const n=Gt(o),l=n.SheetNames[0],a=Ae.sheet_to_json(n.Sheets[l],{header:1});if(a.length===0)throw new Error("The file appears to be empty.");return a}catch(n){throw new Error(`Error processing file: ${n.message}`)}}function Ke(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function xe(){let e=[],t={addEventListener(o,n,l,a){return o.addEventListener(n,l,a),t.add(()=>o.removeEventListener(n,l,a))},requestAnimationFrame(...o){let n=requestAnimationFrame(...o);t.add(()=>cancelAnimationFrame(n))},nextFrame(...o){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...o)})},setTimeout(...o){let n=setTimeout(...o);t.add(()=>clearTimeout(n))},microTask(...o){let n={current:!0};return Ke(()=>{n.current&&o[0]()}),t.add(()=>{n.current=!1})},style(o,n,l){let a=o.style.getPropertyValue(n);return Object.assign(o.style,{[n]:l}),this.add(()=>{Object.assign(o.style,{[n]:a})})},group(o){let n=xe();return o(n),this.add(()=>n.dispose())},add(o){return e.push(o),()=>{let n=e.indexOf(o);if(n>=0)for(let l of e.splice(n,1))l()}},dispose(){for(let o of e.splice(0))o()}};return t}var lt;let No=Symbol("headlessui.useid"),Mo=0;const Qe=(lt=zt)!=null?lt:function(){return B(No,()=>`${++Mo}`)()};function F(e){var t;if(e==null||e.value==null)return null;let o=(t=e.value.$el)!=null?t:e.value;return o instanceof Node?o:null}function X(e,t,...o){if(e in t){let l=t[e];return typeof l=="function"?l(...o):l}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,X),n}var zo=Object.defineProperty,Ro=(e,t,o)=>t in e?zo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,rt=(e,t,o)=>(Ro(e,typeof t!="symbol"?t+"":t,o),o);let Bo=class{constructor(){rt(this,"current",this.detect()),rt(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Ce=new Bo;function ve(e){if(Ce.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=F(e);if(t)return t.ownerDocument}return document}let Ue=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Z=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Z||{}),mt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(mt||{}),jo=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(jo||{});function Ho(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ue)).sort((t,o)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(o.tabIndex||Number.MAX_SAFE_INTEGER)))}var pt=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(pt||{});function Uo(e,t=0){var o;return e===((o=ve(e))==null?void 0:o.body)?!1:X(t,{0(){return e.matches(Ue)},1(){let n=e;for(;n!==null;){if(n.matches(Ue))return!0;n=n.parentElement}return!1}})}var Vo=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Vo||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function re(e){e==null||e.focus({preventScroll:!0})}let Io=["textarea","input"].join(",");function Wo(e){var t,o;return(o=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Io))!=null?o:!1}function Go(e,t=o=>o){return e.slice().sort((o,n)=>{let l=t(o),a=t(n);if(l===null||a===null)return 0;let i=l.compareDocumentPosition(a);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Oe(e,t,{sorted:o=!0,relativeTo:n=null,skipElements:l=[]}={}){var a;let i=(a=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?a:document,r=Array.isArray(e)?o?Go(e):e:Ho(e);l.length>0&&r.length>1&&(r=r.filter(g=>!l.includes(g))),n=n??i.activeElement;let s=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,r.indexOf(n))-1;if(t&4)return Math.max(0,r.indexOf(n))+1;if(t&8)return r.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=t&32?{preventScroll:!0}:{},h=0,f=r.length,m;do{if(h>=f||h+f<=0)return 0;let g=u+h;if(t&16)g=(g+f)%f;else{if(g<0)return 3;if(g>=f)return 1}m=r[g],m==null||m.focus(c),h+=s}while(m!==i.activeElement);return t&6&&Wo(m)&&m.select(),2}function ht(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Xo(){return/Android/gi.test(window.navigator.userAgent)}function Yo(){return ht()||Xo()}function Fe(e,t,o){Ce.isServer||I(n=>{document.addEventListener(e,t,o),n(()=>document.removeEventListener(e,t,o))})}function gt(e,t,o){Ce.isServer||I(n=>{window.addEventListener(e,t,o),n(()=>window.removeEventListener(e,t,o))})}function qo(e,t,o=x(()=>!0)){function n(a,i){if(!o.value||a.defaultPrevented)return;let r=i(a);if(r===null||!r.getRootNode().contains(r))return;let s=function u(c){return typeof c=="function"?u(c()):Array.isArray(c)||c instanceof Set?c:[c]}(e);for(let u of s){if(u===null)continue;let c=u instanceof HTMLElement?u:F(u);if(c!=null&&c.contains(r)||a.composed&&a.composedPath().includes(c))return}return!Uo(r,pt.Loose)&&r.tabIndex!==-1&&a.preventDefault(),t(a,r)}let l=p(null);Fe("pointerdown",a=>{var i,r;o.value&&(l.value=((r=(i=a.composedPath)==null?void 0:i.call(a))==null?void 0:r[0])||a.target)},!0),Fe("mousedown",a=>{var i,r;o.value&&(l.value=((r=(i=a.composedPath)==null?void 0:i.call(a))==null?void 0:r[0])||a.target)},!0),Fe("click",a=>{Yo()||l.value&&(n(a,()=>l.value),l.value=null)},!0),Fe("touchend",a=>n(a,()=>a.target instanceof HTMLElement?a.target:null),!0),gt("blur",a=>n(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var De=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(De||{}),ee=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ee||{});function Q({visible:e=!0,features:t=0,ourProps:o,theirProps:n,...l}){var a;let i=wt(n,o),r=Object.assign(l,{props:i});if(e||t&2&&i.static)return Be(r);if(t&1){let s=(a=i.unmount)==null||a?0:1;return X(s,{0(){return null},1(){return Be({...l,props:{...i,hidden:!0,style:{display:"none"}}})}})}return Be(r)}function Be({props:e,attrs:t,slots:o,slot:n,name:l}){var a,i;let{as:r,...s}=yt(e,["unmount","static"]),u=(a=o.default)==null?void 0:a.call(o,n),c={};if(n){let h=!1,f=[];for(let[m,g]of Object.entries(n))typeof g=="boolean"&&(h=!0),g===!0&&f.push(m);h&&(c["data-headlessui-state"]=f.join(" "))}if(r==="template"){if(u=bt(u??[]),Object.keys(s).length>0||Object.keys(t).length>0){let[h,...f]=u??[];if(!Ko(h)||f.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${l} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(s).concat(Object.keys(t)).map(b=>b.trim()).filter((b,y,L)=>L.indexOf(b)===y).sort((b,y)=>b.localeCompare(y)).map(b=>`  - ${b}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>`  - ${b}`).join(`
`)].join(`
`));let m=wt((i=h.props)!=null?i:{},s,c),g=Rt(h,m,!0);for(let b in m)b.startsWith("on")&&(g.props||(g.props={}),g.props[b]=m[b]);return g}return Array.isArray(u)&&u.length===1?u[0]:u}return D(r,Object.assign({},s,c),{default:()=>u})}function bt(e){return e.flatMap(t=>t.type===ct?bt(t.children):[t])}function wt(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},o={};for(let n of e)for(let l in n)l.startsWith("on")&&typeof n[l]=="function"?(o[l]!=null||(o[l]=[]),o[l].push(n[l])):t[l]=n[l];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(o).map(n=>[n,void 0])));for(let n in o)Object.assign(t,{[n](l,...a){let i=o[n];for(let r of i){if(l instanceof Event&&l.defaultPrevented)return;r(l,...a)}}});return t}function yt(e,t=[]){let o=Object.assign({},e);for(let n of t)n in o&&delete o[n];return o}function Ko(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var Pe=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Pe||{});let Ve=Y({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:o}){return()=>{var n;let{features:l,...a}=e,i={"aria-hidden":(l&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(l&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(l&4)===4&&(l&2)!==2&&{display:"none"}}};return Q({ourProps:i,theirProps:a,slot:{},attrs:o,slots:t,name:"Hidden"})}}}),kt=Symbol("Context");var N=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(N||{});function Qo(){return Je()!==null}function Je(){return B(kt,null)}function Jo(e){G(kt,e)}var xt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(xt||{});function Zo(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let ne=[];Zo(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&ne[0]!==t.target&&(ne.unshift(t.target),ne=ne.filter(o=>o!=null&&o.isConnected),ne.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Ct(e,t,o,n){Ce.isServer||I(l=>{e=e??window,e.addEventListener(t,o,n),l(()=>e.removeEventListener(t,o,n))})}var ke=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ke||{});function en(){let e=p(0);return gt("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function Et(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let o of e.value){let n=F(o);n instanceof HTMLElement&&t.add(n)}return t}var St=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(St||{});let we=Object.assign(Y({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:p(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:o,expose:n}){let l=p(null);n({el:l,$el:l});let a=x(()=>ve(l)),i=p(!1);M(()=>i.value=!0),K(()=>i.value=!1),on({ownerDocument:a},x(()=>i.value&&!!(e.features&16)));let r=nn({ownerDocument:a,container:l,initialFocus:x(()=>e.initialFocus)},x(()=>i.value&&!!(e.features&2)));ln({ownerDocument:a,container:l,containers:e.containers,previousActiveElement:r},x(()=>i.value&&!!(e.features&8)));let s=en();function u(m){let g=F(l);g&&(b=>b())(()=>{X(s.value,{[ke.Forwards]:()=>{Oe(g,Z.First,{skipElements:[m.relatedTarget]})},[ke.Backwards]:()=>{Oe(g,Z.Last,{skipElements:[m.relatedTarget]})}})})}let c=p(!1);function h(m){m.key==="Tab"&&(c.value=!0,requestAnimationFrame(()=>{c.value=!1}))}function f(m){if(!i.value)return;let g=Et(e.containers);F(l)instanceof HTMLElement&&g.add(F(l));let b=m.relatedTarget;b instanceof HTMLElement&&b.dataset.headlessuiFocusGuard!=="true"&&($t(g,b)||(c.value?Oe(F(l),X(s.value,{[ke.Forwards]:()=>Z.Next,[ke.Backwards]:()=>Z.Previous})|Z.WrapAround,{relativeTo:m.target}):m.target instanceof HTMLElement&&re(m.target)))}return()=>{let m={},g={ref:l,onKeydown:h,onFocusout:f},{features:b,initialFocus:y,containers:L,...T}=e;return D(ct,[!!(b&4)&&D(Ve,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Pe.Focusable}),Q({ourProps:g,theirProps:{...t,...T},slot:m,attrs:t,slots:o,name:"FocusTrap"}),!!(b&4)&&D(Ve,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:Pe.Focusable})])}}}),{features:St});function tn(e){let t=p(ne.slice());return ae([e],([o],[n])=>{n===!0&&o===!1?Ke(()=>{t.value.splice(0)}):n===!1&&o===!0&&(t.value=ne.slice())},{flush:"post"}),()=>{var o;return(o=t.value.find(n=>n!=null&&n.isConnected))!=null?o:null}}function on({ownerDocument:e},t){let o=tn(t);M(()=>{I(()=>{var n,l;t.value||((n=e.value)==null?void 0:n.activeElement)===((l=e.value)==null?void 0:l.body)&&re(o())},{flush:"post"})}),K(()=>{t.value&&re(o())})}function nn({ownerDocument:e,container:t,initialFocus:o},n){let l=p(null),a=p(!1);return M(()=>a.value=!0),K(()=>a.value=!1),M(()=>{ae([t,o,n],(i,r)=>{if(i.every((u,c)=>(r==null?void 0:r[c])===u)||!n.value)return;let s=F(t);s&&Ke(()=>{var u,c;if(!a.value)return;let h=F(o),f=(u=e.value)==null?void 0:u.activeElement;if(h){if(h===f){l.value=f;return}}else if(s.contains(f)){l.value=f;return}h?re(h):Oe(s,Z.First|Z.NoScroll)===mt.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),l.value=(c=e.value)==null?void 0:c.activeElement})},{immediate:!0,flush:"post"})}),l}function ln({ownerDocument:e,container:t,containers:o,previousActiveElement:n},l){var a;Ct((a=e.value)==null?void 0:a.defaultView,"focus",i=>{if(!l.value)return;let r=Et(o);F(t)instanceof HTMLElement&&r.add(F(t));let s=n.value;if(!s)return;let u=i.target;u&&u instanceof HTMLElement?$t(r,u)?(n.value=u,re(u)):(i.preventDefault(),i.stopPropagation(),re(s)):re(n.value)},!0)}function $t(e,t){for(let o of e)if(o.contains(t))return!0;return!1}function rn(e){let t=Bt(e.getSnapshot());return K(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function an(e,t){let o=e(),n=new Set;return{getSnapshot(){return o},subscribe(l){return n.add(l),()=>n.delete(l)},dispatch(l,...a){let i=t[l].call(o,...a);i&&(o=i,n.forEach(r=>r()))}}}function sn(){let e;return{before({doc:t}){var o;let n=t.documentElement;e=((o=t.defaultView)!=null?o:window).innerWidth-n.clientWidth},after({doc:t,d:o}){let n=t.documentElement,l=n.clientWidth-n.offsetWidth,a=e-l;o.style(n,"paddingRight",`${a}px`)}}}function un(){return ht()?{before({doc:e,d:t,meta:o}){function n(l){return o.containers.flatMap(a=>a()).some(a=>a.contains(l))}t.microTask(()=>{var l;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let r=xe();r.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>r.dispose()))}let a=(l=window.scrollY)!=null?l:window.pageYOffset,i=null;t.addEventListener(e,"click",r=>{if(r.target instanceof HTMLElement)try{let s=r.target.closest("a");if(!s)return;let{hash:u}=new URL(s.href),c=e.querySelector(u);c&&!n(c)&&(i=c)}catch{}},!0),t.addEventListener(e,"touchstart",r=>{if(r.target instanceof HTMLElement)if(n(r.target)){let s=r.target;for(;s.parentElement&&n(s.parentElement);)s=s.parentElement;t.style(s,"overscrollBehavior","contain")}else t.style(r.target,"touchAction","none")}),t.addEventListener(e,"touchmove",r=>{if(r.target instanceof HTMLElement){if(r.target.tagName==="INPUT")return;if(n(r.target)){let s=r.target;for(;s.parentElement&&s.dataset.headlessuiPortal!==""&&!(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth);)s=s.parentElement;s.dataset.headlessuiPortal===""&&r.preventDefault()}else r.preventDefault()}},{passive:!1}),t.add(()=>{var r;let s=(r=window.scrollY)!=null?r:window.pageYOffset;a!==s&&window.scrollTo(0,a),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function dn(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function cn(e){let t={};for(let o of e)Object.assign(t,o(t));return t}let le=an(()=>new Map,{PUSH(e,t){var o;let n=(o=this.get(e))!=null?o:{doc:e,count:0,d:xe(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let o=this.get(e);return o&&(o.count--,o.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:o}){let n={doc:e,d:t,meta:cn(o)},l=[un(),sn(),dn()];l.forEach(({before:a})=>a==null?void 0:a(n)),l.forEach(({after:a})=>a==null?void 0:a(n))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});le.subscribe(()=>{let e=le.getSnapshot(),t=new Map;for(let[o]of e)t.set(o,o.documentElement.style.overflow);for(let o of e.values()){let n=t.get(o.doc)==="hidden",l=o.count!==0;(l&&!n||!l&&n)&&le.dispatch(o.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",o),o.count===0&&le.dispatch("TEARDOWN",o)}});function fn(e,t,o){let n=rn(le),l=x(()=>{let a=e.value?n.value.get(e.value):void 0;return a?a.count>0:!1});return ae([e,t],([a,i],[r],s)=>{if(!a||!i)return;le.dispatch("PUSH",a,o);let u=!1;s(()=>{u||(le.dispatch("POP",r??a,o),u=!0)})},{immediate:!0}),l}let je=new Map,ye=new Map;function at(e,t=p(!0)){I(o=>{var n;if(!t.value)return;let l=F(e);if(!l)return;o(function(){var i;if(!l)return;let r=(i=ye.get(l))!=null?i:1;if(r===1?ye.delete(l):ye.set(l,r-1),r!==1)return;let s=je.get(l);s&&(s["aria-hidden"]===null?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",s["aria-hidden"]),l.inert=s.inert,je.delete(l))});let a=(n=ye.get(l))!=null?n:0;ye.set(l,a+1),a===0&&(je.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)})}function vn({defaultContainers:e=[],portals:t,mainTreeNodeRef:o}={}){let n=p(null),l=ve(n);function a(){var i,r,s;let u=[];for(let c of e)c!==null&&(c instanceof HTMLElement?u.push(c):"value"in c&&c.value instanceof HTMLElement&&u.push(c.value));if(t!=null&&t.value)for(let c of t.value)u.push(c);for(let c of(i=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(c.contains(F(n))||c.contains((s=(r=F(n))==null?void 0:r.getRootNode())==null?void 0:s.host)||u.some(h=>c.contains(h))||u.push(c));return u}return{resolveContainers:a,contains(i){return a().some(r=>r.contains(i))},mainTreeNodeRef:n,MainTreeNode(){return o!=null?null:D(Ve,{features:Pe.Hidden,ref:n})}}}let Ft=Symbol("ForcePortalRootContext");function mn(){return B(Ft,!1)}let it=Y({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:o}){return G(Ft,e.force),()=>{let{force:n,...l}=e;return Q({theirProps:l,ourProps:{},slot:{},slots:t,attrs:o,name:"ForcePortalRoot"})}}}),Tt=Symbol("StackContext");var Ie=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ie||{});function pn(){return B(Tt,()=>{})}function hn({type:e,enabled:t,element:o,onUpdate:n}){let l=pn();function a(...i){n==null||n(...i),l(...i)}M(()=>{ae(t,(i,r)=>{i?a(0,e,o):r===!0&&a(1,e,o)},{immediate:!0,flush:"sync"})}),K(()=>{t.value&&a(1,e,o)}),G(Tt,a)}let gn=Symbol("DescriptionContext");function bn({slot:e=p({}),name:t="Description",props:o={}}={}){let n=p([]);function l(a){return n.value.push(a),()=>{let i=n.value.indexOf(a);i!==-1&&n.value.splice(i,1)}}return G(gn,{register:l,slot:e,name:t,props:o}),x(()=>n.value.length>0?n.value.join(" "):void 0)}function wn(e){let t=ve(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let o=t.getElementById("headlessui-portal-root");if(o)return o;let n=t.createElement("div");return n.setAttribute("id","headlessui-portal-root"),t.body.appendChild(n)}const We=new WeakMap;function yn(e){var t;return(t=We.get(e))!=null?t:0}function st(e,t){let o=t(yn(e));return o<=0?We.delete(e):We.set(e,o),o}let kn=Y({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:o}){let n=p(null),l=x(()=>ve(n)),a=mn(),i=B(Lt,null),r=p(a===!0||i==null?wn(n.value):i.resolveTarget());r.value&&st(r.value,f=>f+1);let s=p(!1);M(()=>{s.value=!0}),I(()=>{a||i!=null&&(r.value=i.resolveTarget())});let u=B(Ge,null),c=!1,h=Ut();return ae(n,()=>{if(c||!u)return;let f=F(n);f&&(K(u.register(f),h),c=!0)}),K(()=>{var f,m;let g=(f=l.value)==null?void 0:f.getElementById("headlessui-portal-root");!g||r.value!==g||st(r.value,b=>b-1)||r.value.children.length>0||(m=r.value.parentElement)==null||m.removeChild(r.value)}),()=>{if(!s.value||r.value===null)return null;let f={ref:n,"data-headlessui-portal":""};return D(jt,{to:r.value},Q({ourProps:f,theirProps:e,slot:{},attrs:o,slots:t,name:"Portal"}))}}}),Ge=Symbol("PortalParentContext");function xn(){let e=B(Ge,null),t=p([]);function o(a){return t.value.push(a),e&&e.register(a),()=>n(a)}function n(a){let i=t.value.indexOf(a);i!==-1&&t.value.splice(i,1),e&&e.unregister(a)}let l={register:o,unregister:n,portals:t};return[t,Y({name:"PortalWrapper",setup(a,{slots:i}){return G(Ge,l),()=>{var r;return(r=i.default)==null?void 0:r.call(i)}}})]}let Lt=Symbol("PortalGroupContext"),Cn=Y({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:o}){let n=Ht({resolveTarget(){return e.target}});return G(Lt,n),()=>{let{target:l,...a}=e;return Q({theirProps:a,ourProps:{},slot:{},attrs:t,slots:o,name:"PortalGroup"})}}});var En=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(En||{});let Xe=Symbol("DialogContext");function At(e){let t=B(Xe,null);if(t===null){let o=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,At),o}return t}let Te="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Sn=Y({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Te},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:t,attrs:o,slots:n,expose:l}){var a,i;let r=(a=e.id)!=null?a:`headlessui-dialog-${Qe()}`,s=p(!1);M(()=>{s.value=!0});let u=!1,c=x(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(u||(u=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),h=p(0),f=Je(),m=x(()=>e.open===Te&&f!==null?(f.value&N.Open)===N.Open:e.open),g=p(null),b=x(()=>ve(g));if(l({el:g,$el:g}),!(e.open!==Te||f!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof m.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${m.value===Te?void 0:e.open}`);let y=x(()=>s.value&&m.value?0:1),L=x(()=>y.value===0),T=x(()=>h.value>1),P=B(Xe,null)!==null,[_,j]=xn(),{resolveContainers:W,mainTreeNodeRef:ie,MainTreeNode:se}=vn({portals:_,defaultContainers:[x(()=>{var w;return(w=J.panelRef.value)!=null?w:g.value})]}),me=x(()=>T.value?"parent":"leaf"),te=x(()=>f!==null?(f.value&N.Closing)===N.Closing:!1),ue=x(()=>P||te.value?!1:L.value),pe=x(()=>{var w,k,$;return($=Array.from((k=(w=b.value)==null?void 0:w.querySelectorAll("body > *"))!=null?k:[]).find(S=>S.id==="headlessui-portal-root"?!1:S.contains(F(ie))&&S instanceof HTMLElement))!=null?$:null});at(pe,ue);let z=x(()=>T.value?!0:L.value),q=x(()=>{var w,k,$;return($=Array.from((k=(w=b.value)==null?void 0:w.querySelectorAll("[data-headlessui-portal]"))!=null?k:[]).find(S=>S.contains(F(ie))&&S instanceof HTMLElement))!=null?$:null});at(q,z),hn({type:"Dialog",enabled:x(()=>y.value===0),element:g,onUpdate:(w,k)=>{if(k==="Dialog")return X(w,{[Ie.Add]:()=>h.value+=1,[Ie.Remove]:()=>h.value-=1})}});let H=bn({name:"DialogDescription",slot:x(()=>({open:m.value}))}),U=p(null),J={titleId:U,panelRef:p(null),dialogState:y,setTitleId(w){U.value!==w&&(U.value=w)},close(){t("close",!1)}};G(Xe,J);let he=x(()=>!(!L.value||T.value));qo(W,(w,k)=>{w.preventDefault(),J.close(),Vt(()=>k==null?void 0:k.focus())},he);let v=x(()=>!(T.value||y.value!==0));Ct((i=b.value)==null?void 0:i.defaultView,"keydown",w=>{v.value&&(w.defaultPrevented||w.key===xt.Escape&&(w.preventDefault(),w.stopPropagation(),J.close()))});let E=x(()=>!(te.value||y.value!==0||P));return fn(b,E,w=>{var k;return{containers:[...(k=w.containers)!=null?k:[],W]}}),I(w=>{if(y.value!==0)return;let k=F(g);if(!k)return;let $=new ResizeObserver(S=>{for(let ge of S){let V=ge.target.getBoundingClientRect();V.x===0&&V.y===0&&V.width===0&&V.height===0&&J.close()}});$.observe(k),w(()=>$.disconnect())}),()=>{let{open:w,initialFocus:k,...$}=e,S={...o,ref:g,id:r,role:c.value,"aria-modal":y.value===0?!0:void 0,"aria-labelledby":U.value,"aria-describedby":H.value},ge={open:y.value===0};return D(it,{force:!0},()=>[D(kn,()=>D(Cn,{target:g.value},()=>D(it,{force:!1},()=>D(we,{initialFocus:k,containers:W,features:L.value?X(me.value,{parent:we.features.RestoreFocus,leaf:we.features.All&~we.features.FocusLock}):we.features.None},()=>D(j,{},()=>Q({ourProps:S,theirProps:{...$,...o},slot:ge,attrs:o,slots:n,visible:y.value===0,features:De.RenderStrategy|De.Static,name:"Dialog"})))))),D(se)])}}}),$n=Y({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:o,expose:n}){var l;let a=(l=e.id)!=null?l:`headlessui-dialog-panel-${Qe()}`,i=At("DialogPanel");n({el:i.panelRef,$el:i.panelRef});function r(s){s.stopPropagation()}return()=>{let{...s}=e,u={id:a,ref:i.panelRef,onClick:r};return Q({ourProps:u,theirProps:s,slot:{open:i.dialogState.value===0},attrs:t,slots:o,name:"DialogPanel"})}}});function Fn(e){let t={called:!1};return(...o)=>{if(!t.called)return t.called=!0,e(...o)}}function He(e,...t){e&&t.length>0&&e.classList.add(...t)}function Le(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Ye=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(Ye||{});function Tn(e,t){let o=xe();if(!e)return o.dispose;let{transitionDuration:n,transitionDelay:l}=getComputedStyle(e),[a,i]=[n,l].map(r=>{let[s=0]=r.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,c)=>c-u);return s});return a!==0?o.setTimeout(()=>t("finished"),a+i):t("finished"),o.add(()=>t("cancelled")),o.dispose}function ut(e,t,o,n,l,a){let i=xe(),r=a!==void 0?Fn(a):()=>{};return Le(e,...l),He(e,...t,...o),i.nextFrame(()=>{Le(e,...o),He(e,...n),i.add(Tn(e,s=>(Le(e,...n,...t),He(e,...l),r(s))))}),i.add(()=>Le(e,...t,...o,...n,...l)),i.add(()=>r("cancelled")),i.dispose}function oe(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let Ze=Symbol("TransitionContext");var Ln=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ln||{});function An(){return B(Ze,null)!==null}function On(){let e=B(Ze,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Dn(){let e=B(et,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let et=Symbol("NestingContext");function _e(e){return"children"in e?_e(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Ot(e){let t=p([]),o=p(!1);M(()=>o.value=!0),K(()=>o.value=!1);function n(a,i=ee.Hidden){let r=t.value.findIndex(({id:s})=>s===a);r!==-1&&(X(i,{[ee.Unmount](){t.value.splice(r,1)},[ee.Hidden](){t.value[r].state="hidden"}}),!_e(t)&&o.value&&(e==null||e()))}function l(a){let i=t.value.find(({id:r})=>r===a);return i?i.state!=="visible"&&(i.state="visible"):t.value.push({id:a,state:"visible"}),()=>n(a,ee.Unmount)}return{children:t,register:l,unregister:n}}let Dt=De.RenderStrategy,qe=Y({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:o,slots:n,expose:l}){let a=p(0);function i(){a.value|=N.Opening,t("beforeEnter")}function r(){a.value&=~N.Opening,t("afterEnter")}function s(){a.value|=N.Closing,t("beforeLeave")}function u(){a.value&=~N.Closing,t("afterLeave")}if(!An()&&Qo())return()=>D(Pt,{...e,onBeforeEnter:i,onAfterEnter:r,onBeforeLeave:s,onAfterLeave:u},n);let c=p(null),h=x(()=>e.unmount?ee.Unmount:ee.Hidden);l({el:c,$el:c});let{show:f,appear:m}=On(),{register:g,unregister:b}=Dn(),y=p(f.value?"visible":"hidden"),L={value:!0},T=Qe(),P={value:!1},_=Ot(()=>{!P.value&&y.value!=="hidden"&&(y.value="hidden",b(T),u())});M(()=>{let z=g(T);K(z)}),I(()=>{if(h.value===ee.Hidden&&T){if(f.value&&y.value!=="visible"){y.value="visible";return}X(y.value,{hidden:()=>b(T),visible:()=>g(T)})}});let j=oe(e.enter),W=oe(e.enterFrom),ie=oe(e.enterTo),se=oe(e.entered),me=oe(e.leave),te=oe(e.leaveFrom),ue=oe(e.leaveTo);M(()=>{I(()=>{if(y.value==="visible"){let z=F(c);if(z instanceof Comment&&z.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function pe(z){let q=L.value&&!m.value,H=F(c);!H||!(H instanceof HTMLElement)||q||(P.value=!0,f.value&&i(),f.value||s(),z(f.value?ut(H,j,W,ie,se,U=>{P.value=!1,U===Ye.Finished&&r()}):ut(H,me,te,ue,se,U=>{P.value=!1,U===Ye.Finished&&(_e(_)||(y.value="hidden",b(T),u()))})))}return M(()=>{ae([f],(z,q,H)=>{pe(H),L.value=!1},{immediate:!0})}),G(et,_),Jo(x(()=>X(y.value,{visible:N.Open,hidden:N.Closed})|a.value)),()=>{let{appear:z,show:q,enter:H,enterFrom:U,enterTo:J,entered:he,leave:v,leaveFrom:E,leaveTo:w,...k}=e,$={ref:c},S={...k,...m.value&&f.value&&Ce.isServer?{class:It([o.class,k.class,...j,...W])}:{}};return Q({theirProps:S,ourProps:$,slot:{},slots:n,attrs:o,features:Dt,visible:y.value==="visible",name:"TransitionChild"})}}}),Pn=qe,Pt=Y({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:o,slots:n}){let l=Je(),a=x(()=>e.show===null&&l!==null?(l.value&N.Open)===N.Open:e.show);I(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let i=p(a.value?"visible":"hidden"),r=Ot(()=>{i.value="hidden"}),s=p(!0),u={show:a,appear:x(()=>e.appear||!s.value)};return M(()=>{I(()=>{s.value=!1,a.value?i.value="visible":_e(r)||(i.value="hidden")})}),G(et,r),G(Ze,u),()=>{let c=yt(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),h={unmount:e.unmount};return Q({ourProps:{...h,as:"template"},theirProps:{},slot:{},slots:{...n,default:()=>[D(Pn,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...o,...h,...c},n.default)]},attrs:{},features:Dt,visible:i.value==="visible",name:"Transition"})}}});const _n={id:"diagram",class:"content-container"},Nn={id:"buttonbar",class:"w-full flex flex-row justify-center mb-8"},Mn={class:"fixed inset-0 overflow-y-auto"},zn={class:"flex min-h-full items-center justify-center p-4 mt-28 mb-16 text-center"},Rn={class:"flex flex-col justify-start"},Bn={id:"panelcontainer",class:"w-full max-h-[80vh] mb-1 flex flex-row flex-grow bg-white rounded-2xl"},jn={key:0,class:"flex-auto relative"},Hn={class:"h-full w-full absolute overflow-scroll"},Un=["data"],Vn={key:1,class:"text-gray-500"},In=["innerHTML"],Wn={key:1,class:"text-gray-500"},Gn={__name:"diagram",setup(e){const t=ft(),o=p(t.gridData),n=p(t.diagramData),l=p(t.svg),a=p(t.blockCount),i=p(t.towerCount),r=p(t.fileName),s=p(null),u=p(!1);let c=!1,h=0,f=p(.495),m=p(.495),g=p(.01);const b=p(1),y=p({x:0,y:0}),L=p(!1),T=p({x:0,y:0}),P=x(()=>{const v=`scale(${b.value}) translate(${y.value.x}px, ${y.value.y}px)`;return console.log("SVG Transform:",v),{transform:v,transformOrigin:"0 0"}});function _(){u.value=!1,l.value=Re(n.value,t.settings)}function j(){u.value=!0}async function W(v){try{const E=await _o(v);r.value=v.target.files[0].name.split(".")[0],o.value=E,q(E),t.updateFileName(r.value),t.updateGridData(E),console.log("File processed successfully:",E)}catch(E){console.error("Error uploading file:",E.message),alert(`File upload failed: ${E.message}`)}}M(()=>{o.value.length&&q(o.value)}),ae(o,v=>{q(v)},{deep:!0});function ie(){s.value&&s.value.click()}function se(v){o.value=v,t.updateGridData(v)}function me(v){c=!0,h=v.clientX,document.addEventListener("mousemove",te),document.addEventListener("mouseup",ue)}function te(v){if(c){const E=v.clientX-h,w=document.getElementById("panelcontainer").offsetWidth,k=f.value+m.value,$=f.value+E/w,S=k-$;$>=.1&&S>=.1&&(f.value=$,m.value=S,h=v.clientX)}}function ue(){c=!1,document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",ue)}function pe(){if(!n.value){alert("No SVG content to download.");return}const v=Re(n.value,t.settings),E=new Blob([v],{type:"image/svg+xml"}),w=document.createElement("a"),k=URL.createObjectURL(E);w.href=k,w.download=`${r.value}.svg`,w.click(),URL.revokeObjectURL(k)}const z=()=>{if(!o.value.length){alert("No data to download.");return}const v=Ae.json_to_sheet(o.value,{skipHeader:!0}),E=Ae.book_new();Ae.book_append_sheet(E,v,"Sheet1"),Xt(E,`${r.value||"updated-diagram-data"}.xlsx`)};function q(v){let E=0,w=0,k=null,$=null;const S={};v.slice(1).forEach(V=>{var tt,ot,nt;(tt=V[0])!=null&&tt.trim()&&(k=V[0],S[k]={},E++),(ot=V[1])!=null&&ot.trim()&&($=V[1],S[k][$]=[],w++),(nt=V[2])!=null&&nt.trim()&&S[k][$].push(V[2])}),n.value=S;const ge=t.settings;l.value=Re(S,ge),a.value=E,i.value=w,t.updateDiagramData(n.value,l.value,E,w)}function H(v){const w=v.currentTarget.getBoundingClientRect(),k=v.clientX-w.left,$=v.clientY-w.top,S=v.deltaY<0?1.1:1/1.1;b.value*=S,y.value.x-=k/b.value*(S-1),y.value.y-=$/b.value*(S-1)}function U(v){L.value=!0,T.value={x:v.clientX-y.value.x,y:v.clientY-y.value.y}}function J(v){L.value&&(y.value={x:v.clientX-T.value.x,y:v.clientY-T.value.y})}function he(){L.value=!1}return(v,E)=>{const w=Ao;return ce(),fe("div",_n,[d("div",Nn,[d("input",{type:"file",ref_key:"fileInput",ref:s,onChange:W,accept:".xlsx",class:"hidden",style:{display:"none"}},null,544),d("button",{class:"btn-primary",onClick:ie},C(v.$t("common.fileUpload")),1),d("button",{class:"btn-primary",onClick:z},C(v.$t("common.downloadExcel")),1),d("button",{class:"btn-primary",onClick:pe},C(v.$t("common.downloadSVG")),1),d("button",{class:"btn-primary",onClick:j},C(v.$t("navbar.menu.settings")),1),de(A(Pt),{appear:"",show:A(u),as:"template"},{default:be(()=>[de(A(Sn),{onClose:_,class:"relative z-10"},{default:be(()=>[de(A(qe),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:be(()=>E[0]||(E[0]=[d("div",{class:"fixed inset-0 bg-black/25"},null,-1)])),_:1}),d("div",Mn,[d("div",zn,[de(A(qe),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:be(()=>[de(A($n),{class:"w-full max-w-screen-lg transform overflow-hidden rounded-2xl bg-white p-6 align-middle shadow-xl transition-all"},{default:be(()=>[d("div",Rn,[de(w,{onFormSubmit:_})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),d("div",Bn,[d("div",{style:Se({flex:A(f)}),class:"p-4 flex flex-col"},[d("h3",null,C(v.$t("common.fileContent")),1),A(o).length?(ce(),fe("div",jn,[d("div",Hn,[d("canvas-datagrid",{data:A(o),editable:!0,onDataChanged:se},null,40,Un)])])):(ce(),fe("p",Vn,C(v.$t("common.noContent")),1))],4),d("div",{id:"resizeHandle",style:Se({flex:A(g)}),class:"cursor-col-resize flex items-center justify-center bg-gray-100",onMousedown:me},E[1]||(E[1]=[d("p",{class:"text-center text-sm font-medium text-gray-500"},"||",-1)]),36),d("div",{style:Se({flex:A(m)}),class:"p-4 flex flex-col"},[d("h3",null,C(v.$t("common.svgView")),1),A(l)?(ce(),fe("div",{key:0,class:"h-full flex-auto relative overflow-hidden rounded-2xl",onWheel:dt(H,["prevent"]),onMousedown:U,onMousemove:J,onMouseup:he,onMouseleave:he},[d("div",{innerHTML:A(l),class:"diagram h-full absolute",style:Se(A(P))},null,12,In)],32)):(ce(),fe("p",Wn,C(v.$t("common.noContent")),1))],4)]),d("p",null,C(v.$t("common.Blocks"))+": "+C(A(a))+", "+C(v.$t("common.Towers"))+": "+C(A(i)),1)])}}},Qn=Wt(Gn,[["__scopeId","data-v-4e6b64b3"]]);export{Qn as default};
