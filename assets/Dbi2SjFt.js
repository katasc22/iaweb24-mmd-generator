import{_ as h,o as u,c as p,a as t,t as n,v as a,x as d,y as g,z as c,M as y,b as F}from"./BXs_MeCU.js";import{read as S,utils as b}from"./C2piJvdv.js";import{g as _}from"./CNE622Ru.js";const v={data(){return{settings:{tower:{fontFamily:"Arial",fontSize:12,fontWeight:"normal",fontColor:"#000000"},summary:{fontFamily:"Arial",fontSize:12,fontWeight:"normal",fontColor:"#000000"},mentalSpace:{fontFamily:"Arial",fontSize:18,fontWeight:"normal",fontColor:"#000000"}},previewStyle:{tower:{},summary:{},mentalSpace:{}}}},methods:{submitForm(){this.previewStyle.tower={fontFamily:this.settings.tower.fontFamily,fontSize:`${this.settings.tower.fontSize}px`,fontWeight:this.settings.tower.fontWeight,color:this.settings.tower.fontColor},this.previewStyle.summary={fontFamily:this.settings.summary.fontFamily,fontSize:`${this.settings.summary.fontSize}px`,fontWeight:this.settings.summary.fontWeight,color:this.settings.summary.fontColor},this.previewStyle.mentalSpace={fontFamily:this.settings.mentalSpace.fontFamily,fontSize:`${this.settings.mentalSpace.fontSize}px`,fontWeight:this.settings.mentalSpace.fontWeight,color:this.settings.mentalSpace.fontColor}}}},w={class:"border-b-2 border-green"},z={class:"border-green"},C={class:"grid-container"},W={class:"grid-item label"},D={class:"grid-item"},U={for:"towerFontFamily"},$={class:"grid-item"},M={for:"towerFontSize"},V={class:"grid-item"},R={for:"towerFontWeight"},k={value:"normal"},E={value:"bold"},L={value:"lighter"},P={class:"grid-item"},X={for:"towerFontColor"},A={class:"grid-item label"},G={class:"grid-item"},N={for:"summaryFontFamily"},B={class:"grid-item"},j={for:"summaryFontSize"},O={class:"grid-item"},T={for:"summaryFontWeight"},I={value:"normal"},q={value:"bold"},H={value:"lighter"},J={class:"grid-item"},K={for:"summaryFontColor"},Q={class:"grid-item label"},Y={class:"grid-item"},Z={for:"mentalSpaceFontFamily"},x={class:"grid-item"},tt={for:"mentalSpaceFontSize"},et={class:"grid-item"},ot={for:"mentalSpaceFontWeight"},it={value:"normal"},st={value:"bold"},nt={value:"lighter"},lt={class:"grid-item"},rt={for:"mentalSpaceFontColor"},at={class:"pt-8 border-t-2 border-green"},mt={type:"submit",class:"btn-primary"};function dt(e,o,l,r,i,m){return u(),p("form",{onSubmit:o[12]||(o[12]=c((...s)=>m.submitForm&&m.submitForm(...s),["prevent"]))},[t("h2",w,n(e.$t("form.diagramSettings")),1),t("h3",z,n(e.$t("form.fontSettings")),1),t("div",C,[t("div",W,n(e.$t("form.tower")),1),t("div",D,[t("label",U,n(e.$t("form.fontFamily")),1),a(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>i.settings.tower.fontFamily=s),id:"towerFontFamily",type:"text",placeholder:"Arial"},null,512),[[d,i.settings.tower.fontFamily]])]),t("div",$,[t("label",M,n(e.$t("form.fontSize")),1),a(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>i.settings.tower.fontSize=s),id:"towerFontSize",type:"number",placeholder:"12"},null,512),[[d,i.settings.tower.fontSize]])]),t("div",V,[t("label",R,n(e.$t("form.fontWeight")),1),a(t("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>i.settings.tower.fontWeight=s),id:"towerFontWeight"},[t("option",k,n(e.$t("form.normal")),1),t("option",E,n(e.$t("form.bold")),1),t("option",L,n(e.$t("form.lighter")),1)],512),[[g,i.settings.tower.fontWeight]])]),t("div",P,[t("label",X,n(e.$t("form.fontColor")),1),a(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>i.settings.tower.fontColor=s),id:"towerFontColor",type:"color"},null,512),[[d,i.settings.tower.fontColor]])]),t("div",A,n(e.$t("form.summary")),1),t("div",G,[t("label",N,n(e.$t("form.fontFamily")),1),a(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>i.settings.summary.fontFamily=s),id:"summaryFontFamily",type:"text",placeholder:"Arial"},null,512),[[d,i.settings.summary.fontFamily]])]),t("div",B,[t("label",j,n(e.$t("form.fontSize")),1),a(t("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>i.settings.summary.fontSize=s),id:"summaryFontSize",type:"number",placeholder:"12"},null,512),[[d,i.settings.summary.fontSize]])]),t("div",O,[t("label",T,n(e.$t("form.fontWeight")),1),a(t("select",{"onUpdate:modelValue":o[6]||(o[6]=s=>i.settings.summary.fontWeight=s),id:"summaryFontWeight"},[t("option",I,n(e.$t("form.normal")),1),t("option",q,n(e.$t("form.bold")),1),t("option",H,n(e.$t("form.lighter")),1)],512),[[g,i.settings.summary.fontWeight]])]),t("div",J,[t("label",K,n(e.$t("form.fontColor")),1),a(t("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>i.settings.summary.fontColor=s),id:"summaryFontColor",type:"color"},null,512),[[d,i.settings.summary.fontColor]])]),t("div",Q,n(e.$t("form.mentalSpace")),1),t("div",Y,[t("label",Z,n(e.$t("form.fontFamily")),1),a(t("input",{"onUpdate:modelValue":o[8]||(o[8]=s=>i.settings.mentalSpace.fontFamily=s),id:"mentalSpaceFontFamily",type:"text",placeholder:"Arial"},null,512),[[d,i.settings.mentalSpace.fontFamily]])]),t("div",x,[t("label",tt,n(e.$t("form.fontSize")),1),a(t("input",{"onUpdate:modelValue":o[9]||(o[9]=s=>i.settings.mentalSpace.fontSize=s),id:"mentalSpaceFontSize",type:"number",placeholder:"18"},null,512),[[d,i.settings.mentalSpace.fontSize]])]),t("div",et,[t("label",ot,n(e.$t("form.fontWeight")),1),a(t("select",{"onUpdate:modelValue":o[10]||(o[10]=s=>i.settings.mentalSpace.fontWeight=s),id:"mentalSpaceFontWeight"},[t("option",it,n(e.$t("form.normal")),1),t("option",st,n(e.$t("form.bold")),1),t("option",nt,n(e.$t("form.lighter")),1)],512),[[g,i.settings.mentalSpace.fontWeight]])]),t("div",lt,[t("label",rt,n(e.$t("form.fontColor")),1),a(t("input",{"onUpdate:modelValue":o[11]||(o[11]=s=>i.settings.mentalSpace.fontColor=s),id:"mentalSpaceFontColor",type:"color"},null,512),[[d,i.settings.mentalSpace.fontColor]])])]),t("h3",at,n(e.$t("form.otherSettings")),1),t("div",null,n(e.$t("form.todo")),1),t("button",mt,n(e.$t("form.submit")),1)],32)}const gt=h(v,[["render",dt]]),ft={components:{MMForm:y},data(){return{gridData:[],errorMessage:"",leftPanelFlex:.5,rightPanelFlex:.5,isResizing:!1,startX:0,minFlex:.01,maxFlex:.99,svg:"",blockCount:0,towerCount:0}},methods:{async handleFileUpload(e){console.log("handleFileUpload:",e);const o=e.target.files[0];if(console.log("File:",o.name),!o){this.errorMessage="No file selected.";return}this.gridData=[],this.errorMessage="";const l=await o.arrayBuffer();try{const r=S(l),i=r.SheetNames[0],m=b.sheet_to_json(r.Sheets[i],{header:1});m.length===0?this.errorMessage="The file appears to be empty.":(this.gridData=m,console.log("file:"+this.gridData),console.log("Read file: "+m),this.initializeDataGrid(this.gridData),this.generateDiagram(this.gridData))}catch(r){this.errorMessage=`Error processing file: ${r.message}`}},generateDiagram(e){this.blockCount=0,this.towerCount=0;let o=null,l=null;const r={};console.log(e),e.slice(1).forEach(i=>{var m,s,f;console.log(i),(m=i[0])!=null&&m.trim()&&(o=i[0],r[o]={},this.blockCount++),(s=i[1])!=null&&s.trim()&&(l=i[1],r[o][l]=[],this.towerCount++),(f=i[2])!=null&&f.trim()&&r[o][l].push(i[2])}),this.svg=_(r)},reloadDiagram(){this.generateDiagram(this.gridData)},downloadSvg(){if(!this.svg){alert("No SVG content to download.");return}const e=new Blob([this.svg],{type:"image/svg+xml"}),o=document.createElement("a"),l=URL.createObjectURL(e);o.href=l,o.download="mental-model-diagram.svg",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(l)},initializeDataGrid(e){console.log("Initializing DataGrid with:",e),this.gridData=e},startResizing(e){this.isResizing=!0,this.startX=e.clientX,document.addEventListener("mousemove",this.resizePanels),document.addEventListener("mouseup",this.stopResizing)},resizePanels(e){if(this.isResizing){const o=e.clientX-this.startX;this.startX=e.clientX;const l=window.innerWidth,r=Math.max(this.minFlex,Math.min((this.leftPanelFlex*l+o)/l,this.maxFlex));this.leftPanelFlex=r,this.rightPanelFlex=1-this.leftPanelFlex}},stopResizing(){this.isResizing=!1,document.removeEventListener("mousemove",this.resizePanels),document.removeEventListener("mouseup",this.stopResizing)},handleEditorChange(){console.log("Changes detected in gridData. Rebuilding SVG..."),this.generateDiagram(this.gridData)}},watch:{gridData:{handler(e){console.log("Grid data modified:",e),this.handleEditorChange()},deep:!0}}},ht={id:"settings"};function ut(e,o,l,r,i,m){const s=gt;return u(),p("div",ht,[F(s)])}const Ft=h(ft,[["render",ut]]);export{Ft as default};
